<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en-US">
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Uniform Resource Identifier (URI): Generic Syntax</title>
<style type="text/css">
a
{
  text-decoration: none
}
a:hover
{
  text-decoration: underline
}
a:active
{
  text-decoration: underline
}
body
{
  
  color: #000000;
  font-family: helvetica, arial, sans-serif;
  font-size: 13px;
}
dl
{
  margin-left: 2em;
}
h1
{
  color: #333333;
  font-size: 16px;
  line-height: 16px;
  font-family: helvetica, arial, sans-serif;
  page-break-after: avoid;
}
h2
{
  color: #000000;
  font-size: 14px;
  font-family: helvetica, arial, sans-serif;
  page-break-after: avoid;
}
h3
{
  color: #000000;
  font-size: 13px;
  font-family: helvetica, arial, sans-serif;
  page-break-after: avoid;
}
li
{
  margin-left: 2em;
  margin-right: 2em;
}
ol
{
  margin-left: 2em;
  margin-right: 2em;
}
p
{
  margin-left: 2em;
  margin-right: 2em;
}
pre
{
  margin-left: 3em;
  background-color: lightyellow;
}
table
{
  margin-left: 2em;
  font-size: 13px;  
}
td.top
{
  vertical-align: top;
}
td.topnowrap
{
  vertical-align: top;
  white-space: nowrap; 
}
td.right
{
  text-align: right;
}
td.header
{
  width: 33%;
  color: #ffffff;
  background-color: #666666;
  font-size: 10px;
  font-family: arial, helvetica, sans-serif;
  vertical-align: top
}
.editingmark
{
  background-color: khaki;
}
.hotText
{
  color:#ffffff;
  font-weight: normal;
  text-decoration: none;
  font-family: chelvetica, arial, sans-serif;
  font-size: 9px
}
.link2
{
  color:#ffffff;
  font-weight: bold;
  text-decoration: none;
  font-family: helvetica, arial, sans-serif;
  font-size: 9px
}
.toowide
{
  color: red;
  font-weight: bold;
}
.RFC
{
  color:#666666;
  font-weight: bold;
  text-decoration: none;
  font-family: helvetica, arial, sans-serif;
  font-size: 9px
}
.title
{
  color: #990000;
  font-size: 22px;
  line-height: 22px;
  font-weight: bold;
  text-align: right;
  font-family: helvetica, arial, sans-serif
}
.figure
{
  font-weight: bold;
  text-align: center;
  font-size: 12px;
}
.filename
{
  color: #333333;
  font-weight: bold;
  font-size: 16px;
  line-height: 24px;
  font-family: helvetica, arial, sans-serif;
  text-align: right;
}

del
{
  color: red;
}

ins
{
  color: blue;
}
table.resolution
{
  background-color: khaki;
  border-width: thin;
  border-style: solid;
  border-color: black;
  margin-left: auto;
  margin-right: 0;
  float: right;
}

@media print {
         .noprint {display:none}
}
</style>
<link href="#rfc.toc" rel="Contents">
<link href="#rfc.authors" rel="Author">
<link href="#rfc.copyright" rel="Copyright">
<link href="#rfc.index" rel="Index">
<link href="#rfc.section.1" title="1 Introduction" rel="Chapter">
<link href="#rfc.section.2" title="2 Characters" rel="Chapter">
<link href="#rfc.section.3" title="3 Syntax Components" rel="Chapter">
<link href="#rfc.section.4" title="4 Usage" rel="Chapter">
<link href="#rfc.section.5" title="5 Reference Resolution" rel="Chapter">
<link href="#rfc.section.6" title="6 Normalization and Comparison" rel="Chapter">
<link href="#rfc.section.7" title="7 Security Considerations" rel="Chapter">
<link href="#rfc.section.8" title="8 Acknowledgments" rel="Chapter">
<link href="#rfc.section.A" title="A Collected ABNF for URI" rel="Appendix">
<link href="#rfc.section.B" title="B Parsing a URI Reference with a Regular Expression" rel="Appendix">
<link href="#rfc.section.C" title="C Delimiting a URI in Context" rel="Appendix">
<link href="#rfc.section.D" title="D Summary of Non-editorial Changes" rel="Appendix">
<link href="http://purl.org/dc" rel="schema.DC">
<meta content="uniform resource identifier,URI,URL,URN,WWW,resource" name="keywords">
<meta content="Tim Berners-Lee, Roy T. Fielding, Larry Masinter" name="DC.Creator">
</head>
<body>
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #000000; text-align: center; vertical-align: middle; height: 2.5em;"><b><span class="RFC">&nbsp;RFC&nbsp;</span></b></td>
</tr>
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<table cellspacing="1" cellpadding="1" border="0" width="66%" summary="header information">
<tr>
<td class="header">Network Working Group&nbsp;</td><td class="header">T. Berners-Lee&nbsp;</td>
</tr>
<tr>
<td class="header">INTERNET DRAFT&nbsp;</td><td class="header">MIT/LCS&nbsp;</td>
</tr>
<tr>
<td class="header">
        &lt;draft-fielding-uri-rfc2396bis-0x&gt;
      &nbsp;</td><td class="header">R. Fielding&nbsp;</td>
</tr>
<tr>
<td class="header">
        Obsoletes: <a href="http://www.ietf.org/rfc/rfc2732.txt">2732</a>,
      <a href="http://www.ietf.org/rfc/rfc2396.txt">2396</a>,
      <a href="http://www.ietf.org/rfc/rfc1808.txt">1808</a>&nbsp;</td><td class="header">Day Software&nbsp;</td>
</tr>
<tr>
<td class="header">
          Updates: <a href="http://www.ietf.org/rfc/rfc1738.txt">1738</a>&nbsp;</td><td class="header">L. Masinter&nbsp;</td>
</tr>
<tr>
<td class="header">
         Category:
        Standards Track&nbsp;</td><td class="header">Adobe&nbsp;</td>
</tr>
<tr>
<td class="header">Expires: December 2003&nbsp;</td><td class="header">June 2003&nbsp;</td>
</tr>
</table>
<p class="title">Uniform Resource Identifier (URI): Generic Syntax<br>
<span class="filename">draft-fielding-uri-rfc2396bis-0x</span>
</p>
<h1>Status of this Memo</h1>
<p>
        This document is an Internet-Draft and is 
        
            in full conformance with all provisions of Section 10 of RFC2026.    
            </p>
<p>
        Internet-Drafts are working documents of the Internet Engineering
        Task Force (IETF), its areas, and its working groups.
        Note that other groups may also distribute working documents as
        Internet-Drafts.
      </p>
<p>
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any time.
        It is inappropriate to use Internet-Drafts as reference material or to cite
        them other than as "work in progress".
      </p>
<p>
        The list of current Internet-Drafts can be accessed at
        <a href="http://www.ietf.org/ietf/1id-abstracts.txt">http://www.ietf.org/ietf/1id-abstracts.txt</a>.
      </p>
<p>
        The list of Internet-Draft Shadow Directories can be accessed at
        <a href="http://www.ietf.org/shadow.html">http://www.ietf.org/shadow.html</a>.
      </p>
<p>
        This Internet-Draft will expire in December 2003.
      </p>
<h1>Copyright Notice</h1>
<p>
    Copyright (C) The Internet Society (2003). All Rights Reserved.
  </p>
<h1>Abstract</h1>

<p>
A Uniform Resource Identifier (URI) is a compact string of characters
for identifying an abstract or physical resource.  This specification
defines the generic URI syntax and a process for resolving URI references
that might be in relative form, along with guidelines and security
considerations for the use of URIs on the Internet.
</p>

<p>
The URI syntax defines a grammar that is a superset of all valid URIs,
such that an implementation can parse the common components of a URI
reference without knowing the scheme-specific requirements of every
possible identifier.  This specification does not define a generative
grammar for URIs; that task is performed by the individual
specifications of each URI scheme.
</p>
<h1>Editorial Note</h1>

<p>
Discussion of this draft and comments to the editors should be sent
to the uri@w3.org mailing list.  An issues list and version history
is available at
<a href="http://www.apache.org/~fielding/uri/rev-2002/issues.html">&lt;http://www.apache.org/~fielding/uri/rev-2002/issues.html&gt;</a>.
</p>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #000000; text-align: center; vertical-align: middle; height: 2.5em;"><b><span class="RFC">&nbsp;RFC&nbsp;</span></b></td>
</tr>
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.toc">Table of Contents</a>
</h1>
<p>

<b>1&nbsp;
            <a href="#intro">Introduction</a></b>
<br>





<b>&nbsp;1.1&nbsp;
            <a href="#overview">Overview of URIs</a></b>
<br>





        




<b>&nbsp;&nbsp;1.1.1&nbsp;
            <a href="#generic-syntax">Generic Syntax</a></b>
<br>
        






<b>&nbsp;&nbsp;1.1.2&nbsp;
            <a href="#examples">Examples</a></b>
<br>




<b>&nbsp;&nbsp;1.1.3&nbsp;
            <a href="#URLvsURN">URI, URL, and URN</a></b>
<br>
        
        
        
        






<b>&nbsp;1.2&nbsp;
            <a href="#design">Design Considerations</a></b>
<br>


<b>&nbsp;&nbsp;1.2.1&nbsp;
            <a href="#transcription">Transcription</a></b>
<br>        
        







<b>&nbsp;&nbsp;1.2.2&nbsp;
            <a href="#identification">Separating Identification from Interaction</a></b>
<br>
        

        
        

        
        

        





<b>&nbsp;&nbsp;1.2.3&nbsp;
            <a href="#hierarchical">Hierarchical Identifiers</a></b>
<br>
        



        







<b>&nbsp;1.3&nbsp;
            <a href="#notation">Syntax Notation</a></b>
<br>
        
















<b>2&nbsp;
            <a href="#characters">Characters</a></b>
<br>





<b>&nbsp;2.1&nbsp;
            <a href="#encoding">Encoding of Characters</a></b>
<br>






<b>&nbsp;2.2&nbsp;
            <a href="#reserved">Reserved Characters</a></b>
<br>






<b>&nbsp;2.3&nbsp;
            <a href="#unreserved">Unreserved Characters</a></b>
<br>





<b>&nbsp;2.4&nbsp;
            <a href="#escaped">Escaped Characters</a></b>
<br>



<b>&nbsp;&nbsp;2.4.1&nbsp;
            <a href="#percent-encoding">Escaped Encoding</a></b>
<br>




<b>&nbsp;&nbsp;2.4.2&nbsp;
            <a href="#when-to-escape">When to Escape and Unescape</a></b>
<br>









<b>&nbsp;2.5&nbsp;
            <a href="#excluded">Excluded Characters</a></b>
<br>










<b>3&nbsp;
            <a href="#components">Syntax Components</a></b>
<br>











<b>&nbsp;3.1&nbsp;
            <a href="#scheme">Scheme</a></b>
<br>






<b>&nbsp;3.2&nbsp;
            <a href="#authority">Authority</a></b>
<br>






<b>&nbsp;&nbsp;3.2.1&nbsp;
            <a href="#userinfo">User Information</a></b>
<br>






<b>&nbsp;&nbsp;3.2.2&nbsp;
            <a href="#host">Host</a></b>
<br>










<b>&nbsp;&nbsp;3.2.3&nbsp;
            <a href="#port">Port</a></b>
<br>







<b>&nbsp;3.3&nbsp;
            <a href="#path">Path</a></b>
<br>












<b>&nbsp;3.4&nbsp;
            <a href="#query">Query</a></b>
<br>





<b>&nbsp;3.5&nbsp;
            <a href="#fragment">Fragment</a></b>
<br>










<b>4&nbsp;
            <a href="#usage">Usage</a></b>
<br>



<b>&nbsp;4.1&nbsp;
            <a href="#uri-reference">URI Reference</a></b>
<br>






<b>&nbsp;4.2&nbsp;
            <a href="#relative-uri">Relative URI</a></b>
<br>










<b>&nbsp;4.3&nbsp;
            <a href="#absolute-uri">Absolute URI</a></b>
<br>






<b>&nbsp;4.4&nbsp;
            <a href="#same-document">Same-document Reference</a></b>
<br>






<b>&nbsp;4.5&nbsp;
            <a href="#suffix">Suffix Reference</a></b>
<br>










<b>5&nbsp;
            <a href="#reference-resolution">Reference Resolution</a></b>
<br>





<b>&nbsp;5.1&nbsp;
            <a href="#base-uri">Establishing a Base URI</a></b>
<br>






<b>&nbsp;&nbsp;5.1.1&nbsp;
            <a href="#base-context">Base URI within Document Content</a></b>
<br>






<b>&nbsp;&nbsp;5.1.2&nbsp;
            <a href="#base-encapsulated">Base URI from the Encapsulating Entity</a></b>
<br>




<b>&nbsp;&nbsp;5.1.3&nbsp;
            <a href="#base-retrieval">Base URI from the Retrieval URI</a></b>
<br>




<b>&nbsp;&nbsp;5.1.4&nbsp;
            <a href="#base-default">Default Base URI</a></b>
<br>






<b>&nbsp;5.2&nbsp;
            <a href="#absolutize">Obtaining the Referenced URI</a></b>
<br>











<b>&nbsp;5.3&nbsp;
            <a href="#recomposition">Recomposition of a Parsed URI</a></b>
<br>




<b>&nbsp;5.4&nbsp;
            <a href="#reference-examples">Reference Resolution Examples</a></b>
<br>





<b>&nbsp;&nbsp;5.4.1&nbsp;
            <a href="#relative-normal">Normal Examples</a></b>
<br>




<b>&nbsp;&nbsp;5.4.2&nbsp;
            <a href="#relative-abnormal">Abnormal Examples</a></b>
<br>



















<b>6&nbsp;
            <a href="#comparison">Normalization and Comparison</a></b>
<br>




<b>&nbsp;6.1&nbsp;
            <a href="#equivalence">Equivalence</a></b>
<br>






<b>&nbsp;6.2&nbsp;
            <a href="#comparison-ladder">Comparison Ladder</a></b>
<br>




<b>&nbsp;&nbsp;6.2.1&nbsp;
            <a href="#comparison-string">Simple String Comparison</a></b>
<br>







<b>&nbsp;&nbsp;6.2.2&nbsp;
            <a href="#normalize-syntax">Syntax-based Normalization</a></b>
<br>



<b>&nbsp;&nbsp;&nbsp;6.2.2.1&nbsp;
            <a href="#normalize-case">Case Normalization</a></b>
<br>




<b>&nbsp;&nbsp;&nbsp;6.2.2.2&nbsp;
            <a href="#normalize-escape">Escape Normalization</a></b>
<br>





<b>&nbsp;&nbsp;&nbsp;6.2.2.3&nbsp;
            <a href="#normalize-path">Path Segment Normalization</a></b>
<br>






<b>&nbsp;&nbsp;6.2.3&nbsp;
            <a href="#normalize-scheme">Scheme-based Normalization</a></b>
<br>




<b>&nbsp;&nbsp;6.2.4&nbsp;
            <a href="#normalize-protocol">Protocol-based Normalization</a></b>
<br>







<b>&nbsp;6.3&nbsp;
            <a href="#canonical-form">Canonical Form</a></b>
<br>







<b>7&nbsp;
            <a href="#security">Security Considerations</a></b>
<br>


<b>&nbsp;7.1&nbsp;
            <a href="#security-reliability">Reliability and Consistency</a></b>
<br>



<b>&nbsp;7.2&nbsp;
            <a href="#security-malicious">Malicious Construction</a></b>
<br>





<b>&nbsp;7.3&nbsp;
            <a href="#security-ipv4">Rare IP Address Formats</a></b>
<br>





<b>&nbsp;7.4&nbsp;
            <a href="#security-sensitive">Sensitive Information</a></b>
<br>



<b>&nbsp;7.5&nbsp;
            <a href="#security-semantic">Semantic Attacks</a></b>
<br>






<b>8&nbsp;
            <a href="#ack">Acknowledgments</a></b>
<br>



<b>&sect;&nbsp;
            <a href="#rfc.normative_references">Normative References</a></b>
<br>
<b>&sect;&nbsp;
            <a href="#rfc.informative_references">Informative References</a></b>
<br>
<b>&sect;&nbsp;
            <a href="#rfc.authors">Author's Addresses</a></b>
<br>
<b>A&nbsp;
            <a href="#collected-abnf">Collected ABNF for URI</a></b>
<br>


<b>B&nbsp;
            <a href="#regexp">Parsing a URI Reference with a Regular Expression</a></b>
<br>











<b>C&nbsp;
            <a href="#delimiting">Delimiting a URI in Context</a></b>
<br>














<b>D&nbsp;
            <a href="#changes">Summary of Non-editorial Changes</a></b>
<br>


<b>&nbsp;D.1&nbsp;
            <a href="#additions">Additions</a></b>
<br>







<b>&nbsp;D.2&nbsp;
            <a href="#modifications">Modifications from RFC 2396</a></b>
<br>









<b>&sect;&nbsp;
            <a href="#rfc.ipr">Intellectual Property and Copyright Statements</a></b>
<br>
<b>&sect;&nbsp;
            <a href="#rfc.index">Index</a></b>
<br>
</p>

<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.1">1</a>&nbsp;
    <a name="intro">Introduction</a>
</h1>
<div>
<a name="rfc.section.1.p.1"></a>
</div>
<p>
A Uniform Resource Identifier (URI) provides a simple and extensible
means for identifying a resource.  This specification of URI syntax
and semantics is derived from concepts introduced by the World Wide
Web global information initiative, whose use of such identifiers dates
from 1990 and is described in "Universal Resource Identifiers in WWW"
<a href="#RFC1630" title="Universal Resource Identifiers in WWW: A Unifying Syntax for the Expression of Names and Addresses of Objects on the Network as used in the World-Wide Web">[RFC1630]</a>, and is designed to meet the
recommendations laid out in "Functional Recommendations for Internet
Resource Locators" <a href="#RFC1736" title="Functional Recommendations for Internet Resource Locators">[RFC1736]</a> and "Functional Requirements
for Uniform Resource Names" <a href="#RFC1737" title="Functional Requirements for Uniform Resource Names">[RFC1737]</a>.
</p>
<div>
<a name="rfc.section.1.p.2"></a>
</div>
<p>
This document obsoletes <a href="#RFC2396" title="Uniform Resource Identifiers (URI): Generic Syntax">[RFC2396]</a>, which merged
"Uniform Resource Locators" <a href="#RFC1738" title="Uniform Resource Locators (URL)">[RFC1738]</a> and
"Relative Uniform Resource Locators" <a href="#RFC1808" title="Relative Uniform Resource Locators">[RFC1808]</a> in order
to define a single, generic syntax for all URIs.  It excludes those
portions of RFC 1738 that defined the specific syntax of individual
URI schemes; those portions will be updated as separate documents.
The process for registration of new URI schemes is defined separately
by <a href="#RFC2717" title="Registration Procedures for URL Scheme Names">[RFC2717]</a>.
</p>
<div>
<a name="rfc.section.1.p.3"></a>
</div>
<p>
All significant changes from RFC 2396 are noted in <a href="#changes">appendix&nbsp;D</a>.
</p>
<h2>
<a name="rfc.iref.1"></a><a name="rfc.iref.2"></a><a name="rfc.iref.3"></a><a name="rfc.section.1.1">1.1</a>&nbsp;
    <a name="overview">Overview of URIs</a>
</h2>
<div>
<a name="rfc.section.1.1.p.1"></a>
</div>
<p>
URIs are characterized as follows:
</p>
<div>
<a name="rfc.section.1.1.p.2"></a>
</div>
<p>Uniform
  </p>
<dl>
    
<dd style="margin-top: .5em">
Uniformity provides several benefits: it allows different types
of resource identifiers to be used in the same context, even
when the mechanisms used to access those resources may differ;
it allows uniform semantic interpretation of common syntactic
conventions across different types of resource identifiers; it
allows introduction of new types of resource identifiers
without interfering with the way that existing identifiers are
used; and, it allows the identifiers to be reused in many
different contexts, thus permitting new applications or
protocols to leverage a pre-existing, large, and widely-used
set of resource identifiers.
    </dd>
  
</dl>
<p>

</p>
<div>
<a name="rfc.section.1.1.p.3"></a>
</div>
<p>Resource
  </p>
<dl>
    
<dd style="margin-top: .5em">
Anything that can be named or described can be a resource.
Familiar examples include an electronic document, an image,
a service (e.g., "today's weather report for Los Angeles"),
and a collection of other resources.
A resource is not necessarily accessible via the Internet;
e.g., human beings, corporations, and bound books in a library
can also be resources.
Likewise, abstract concepts can be resources, such as the operators and
operands of a mathematical equation or the types of a relationship
(e.g., "parent" or "employee").
    </dd>
  
</dl>
<p>

</p>
<div>
<a name="rfc.section.1.1.p.4"></a>
</div>
<p>Identifier
  </p>
<dl>
    
<dd style="margin-top: .5em">
An identifier embodies the information required to distinguish what is
being identified from all other things within its scope of identification.
    </dd>
  
</dl>
<p>

</p>
<div>
<a name="rfc.section.1.1.p.5"></a>
</div>
<p>
A URI is an identifier that consists of a sequence of characters
matching the syntax defined by the grammar rule named "URI" in
<a href="#components">section&nbsp;3</a>.
A URI can be used to refer to a resource.
This specification does not place any
limits on the nature of a resource or the reasons why an application
might wish to refer to a resource.  URIs have a global scope
and should be interpreted consistently regardless of context, but
that interpretation may be defined in relation to the user's context
(e.g., "http://localhost/" refers to a resource that is relative to
the user's network interface and yet not specific to any one user).
</p>
<h3>
<a name="rfc.iref.4"></a><a name="rfc.section.1.1.1">1.1.1</a>&nbsp;
    <a name="generic-syntax">Generic Syntax</a>
</h3>
<div>
<a name="rfc.section.1.1.1.p.1"></a>
</div>
<p>
Each URI begins with a scheme name, as defined in <a href="#scheme">section&nbsp;3.1</a>,
that refers to a specification for assigning identifiers within that scheme.
As such, the URI syntax is a federated and extensible naming system wherein
each scheme's specification may further restrict the syntax and semantics
of identifiers using that scheme.
</p>
<div>
<a name="rfc.section.1.1.1.p.2"></a>
</div>
<p>
This specification defines those elements of the URI syntax that are
required of all URI schemes or are common to many URI schemes.  It thus
defines the syntax and semantics that are needed to implement a
scheme-independent parsing mechanism for URI references, such that the
scheme-dependent handling of a URI can be postponed until the
scheme-dependent semantics are needed.  Likewise, protocols and data
formats that make use of URI references can refer to this specification
as defining the range of syntax allowed for all URIs, including those
schemes that have yet to be defined.
</p>
<div>
<a name="rfc.section.1.1.1.p.3"></a>
</div>
<p>
A parser of the generic URI syntax is capable of parsing any URI
reference into its major components; once the scheme is determined,
further scheme-specific parsing can be performed on the components.
In other words, the URI generic syntax is a superset of the syntax
of all URI schemes.
</p>
<h3>
<a name="rfc.section.1.1.2">1.1.2</a>&nbsp;
    <a name="examples">Examples</a>
</h3>
<div>
<a name="rfc.figure.u.1"></a>
</div>
<p>
The following examples illustrate URIs that are in common use.
</p>
<pre>   ftp://ftp.is.co.za/rfc/rfc1808.txt
      -- ftp scheme for File Transfer Protocol services

   gopher://gopher.tc.umn.edu:70/11/Mailing%20Lists/
      -- gopher scheme for Gopher and Gopher+ Protocol services

   http://www.ietf.org/rfc/rfc2396.txt
      -- http scheme for Hypertext Transfer Protocol services

   mailto:John.Doe@example.com
      -- mailto scheme for electronic mail addresses

   news:comp.infosystems.www.servers.unix
      -- news scheme for USENET news groups and articles

   telnet://melvyl.ucop.edu/
      -- telnet scheme for interactive TELNET services
</pre>
<h3>
<a name="rfc.iref.5"></a><a name="rfc.iref.6"></a><a name="rfc.iref.7"></a><a name="rfc.iref.8"></a><a name="rfc.section.1.1.3">1.1.3</a>&nbsp;
    <a name="URLvsURN">URI, URL, and URN</a>
</h3>
<div>
<a name="rfc.section.1.1.3.p.1"></a>
</div>
<p>
A URI can be further classified as a locator, a name, or both.  The
term "Uniform Resource Locator" (URL) refers to the subset of URIs
that, in addition to identifying the resource, provide a means of
locating the resource by describing its primary access mechanism
(e.g., its network "location").  The term "Uniform Resource Name" (URN)
refers to the subset of URIs that are required to remain globally unique and
persistent even when the resource ceases to exist or becomes unavailable.
</p>
<div>
<a name="rfc.section.1.1.3.p.2"></a>
</div>
<p>
An individual scheme does not need to be classified as being just one of
"name" or "locator".  Instances of URIs from any given scheme may have
the characteristics of names or locators or both, often depending on the
persistence and care in the assignment of identifiers by the naming
authority, rather than any quality of the scheme.  This specification
deprecates use of the term "URN" for anything but URIs in the "urn" scheme
<a href="#RFC2141" title="URN Syntax">[RFC2141]</a>.  This specification also deprecates the term "URL".
</p>
<h2>
<a name="rfc.section.1.2">1.2</a>&nbsp;
    <a name="design">Design Considerations</a>
</h2>
<h3>
<a name="rfc.iref.9"></a><a name="rfc.section.1.2.1">1.2.1</a>&nbsp;
    <a name="transcription">Transcription</a>
</h3>
<div>
<a name="rfc.section.1.2.1.p.1"></a>
</div>
<p>
The URI syntax has been designed with global transcription as one of
its main considerations.  A URI is a sequence of characters from a very
limited set: the letters of the basic Latin alphabet, digits,
and a few special characters.  A URI may be represented in a variety
of ways: e.g., ink on paper, pixels on a screen, or a sequence of
octets in a coded character set.  The interpretation of a URI depends
only on the characters used and not how those characters are
represented in a network protocol.
</p>
<div>
<a name="rfc.section.1.2.1.p.2"></a>
</div>
<p>
The goal of transcription can be described by a simple scenario.
Imagine two colleagues, Sam and Kim, sitting in a pub at an
international conference and exchanging research ideas.  Sam asks Kim
for a location to get more information, so Kim writes the URI for the
research site on a napkin.  Upon returning home, Sam takes out the
napkin and types the URI into a computer, which then retrieves the
information to which Kim referred.
</p>
<div>
<a name="rfc.section.1.2.1.p.3"></a>
</div>
<p>
There are several design considerations revealed by the scenario:
  </p>
<ul>
    
<li>
A URI is a sequence of characters that is not always
represented as a sequence of octets.
    </li>
    
<li>
A URI might be transcribed from a non-network source, and thus
should consist of characters that are most likely to be able to
be entered into a computer, within the constraints imposed by
keyboards (and related input devices) across languages and locales.
    </li>
    
<li>
A URI often needs to be remembered by people, and it is easier
for people to remember a URI when it consists of meaningful or
familiar components.
    </li>
  
</ul>
<p>

</p>
<div>
<a name="rfc.section.1.2.1.p.4"></a>
</div>
<p>
These design considerations are not always in alignment.  For example, it
is often the case that the most meaningful name for a URI component
would require characters that cannot be typed into some systems.  The
ability to transcribe a resource identifier from one medium to
another has been considered more important than having a URI consist of
the most meaningful of components.  In local or regional contexts
and with improving technology, users might benefit from being able to
use a wider range of characters; such use is not defined in this
specification.
</p>
<h3>
<a name="rfc.iref.10"></a><a name="rfc.iref.11"></a><a name="rfc.iref.12"></a><a name="rfc.iref.13"></a><a name="rfc.iref.14"></a><a name="rfc.iref.15"></a><a name="rfc.section.1.2.2">1.2.2</a>&nbsp;
    <a name="identification">Separating Identification from Interaction</a>
</h3>
<div>
<a name="rfc.section.1.2.2.p.1"></a>
</div>
<p>
A common misunderstanding of URIs is that they are only used to
refer to accessible resources.  In fact, the URI alone only provides
identification; access to the resource is neither guaranteed nor
implied by the presence of a URI.  Instead, an operation (if any)
associated with a URI reference is defined by the protocol element,
data format attribute, or natural language text in which it appears.
</p>
<div>
<a name="rfc.section.1.2.2.p.2"></a>
</div>
<p>
Given a URI, a system may attempt to perform a variety of operations
on the resource, as might be characterized by such words as "denote",
"access", "update", "replace", or "find attributes".  Such operations
are defined by the protocols that make use of URIs, not by this
specification.  However, we do use a few general terms for describing
common operations on URIs.  URI "resolution" is the process of determining
an access mechanism and the appropriate parameters necessary to dereference
a URI; such resolution may require several iterations.  Use of that access
mechanism to perform an action on the URI's resource is termed a
"dereference" of the URI.
</p>
<div>
<a name="rfc.section.1.2.2.p.3"></a>
</div>
<p>
When URIs are used within information systems to identify sources
of information, the most common form of URI dereference is "retrieval":
making use of a URI in order to retrieve a representation of its associated
resource.  A "representation" is a sequence of octets, along with metadata
describing those octets, that constitutes a record of the state of the
resource at the time that the representation is generated.  Retrieval is
achieved by a process that might include using the URI as a cache key to
check for a locally cached representation, resolution of the URI to
determine an appropriate access mechanism (if any), and dereference
of the URI for the sake of applying a retrieval operation.
</p>
<div>
<a name="rfc.section.1.2.2.p.4"></a>
</div>
<p>
URI references in information systems are designed to be late-binding:
the result of an access is generally determined at the time it is accessed
and may vary over time or due to other aspects of the interaction.
When an author creates a reference to such a resource, they do so with
the intention that the reference be used in the future; what is being
identified is not some specific result that was obtained in the past,
but rather some characteristic that is expected to be true for future
results.  In such cases, the resource referred to by the URI is actually
a sameness of characteristics as observed over time, perhaps elucidated
by additional comments or assertions made by the resource provider.
</p>
<div>
<a name="rfc.section.1.2.2.p.5"></a>
</div>
<p>
Although many URI schemes are named after protocols, this does not
imply that use of such a URI will result in access to the resource
via the named protocol.  URIs are often used simply for the sake of
identification.  Even when a URI is used to retrieve a representation
of a resource, that access might be through gateways, proxies, caches,
and name resolution services that are independent of the protocol
associated with the scheme name, and the resolution of some URIs may
require the use of more than one protocol (e.g., both DNS and HTTP
are typically used to access an "http" URI's origin server when
a representation isn't found in a local cache).
</p>
<h3>
<a name="rfc.iref.16"></a><a name="rfc.iref.17"></a><a name="rfc.section.1.2.3">1.2.3</a>&nbsp;
    <a name="hierarchical">Hierarchical Identifiers</a>
</h3>
<div>
<a name="rfc.section.1.2.3.p.1"></a>
</div>
<p>
The URI syntax is organized hierarchically, with components listed
in decreasing order from left to right.  For some URI schemes, the
visible hierarchy is limited to the scheme itself: everything after
the scheme component delimiter is considered opaque to URI processing.
Other URI schemes make the hierarchy explicit and visible to
generic parsing algorithms.
</p>
<div>
<a name="rfc.section.1.2.3.p.2"></a>
</div>
<p>
The URI syntax reserves the slash ("/"), question-mark ("?"), and
number-sign ("#") characters for the purpose of delimiting components
that are significant to the generic parser's hierarchical interpretation
of an identifier.  In addition to aiding the readability of such
identifiers through the consistent use of familiar syntax, this
uniform representation of hierarchy across naming schemes allows
scheme-independent references to be made relative to that hierarchy.
</p>
<div>
<a name="rfc.section.1.2.3.p.3"></a>
</div>
<p>
It is often the case that a group or "tree" of documents has been
constructed to serve a common purpose; the vast majority of URIs in
these documents point to resources within the tree rather than
outside of it.  Similarly, documents located at a particular site are
much more likely to refer to other resources at that site than to
resources at remote sites.
</p>
<div>
<a name="rfc.section.1.2.3.p.4"></a>
</div>
<p>
Relative referencing of URIs allows document trees to be partially
independent of their location and access scheme.  For instance, it is
possible for a single set of hypertext documents to be simultaneously
accessible and traversable via each of the "file", "http", and "ftp"
schemes if the documents refer to each other using relative references.
Furthermore, such document trees can be moved, as a whole, without
changing any of the relative references.
</p>
<div>
<a name="rfc.section.1.2.3.p.5"></a>
</div>
<p>
A relative URI reference (<a href="#relative-uri">section&nbsp;4.2</a>) refers to a
resource by describing the difference within a hierarchical name space
between the current context and the target URI.  The reference resolution
algorithm, presented in <a href="#reference-resolution">section&nbsp;5</a>, defines
how such references are resolved.
</p>
<h2>
<a name="rfc.iref.18"></a><a name="rfc.iref.19"></a><a name="rfc.iref.20"></a><a name="rfc.iref.21"></a><a name="rfc.iref.22"></a><a name="rfc.iref.23"></a><a name="rfc.iref.24"></a><a name="rfc.iref.25"></a><a name="rfc.iref.26"></a><a name="rfc.iref.27"></a><a name="rfc.section.1.3">1.3</a>&nbsp;
    <a name="notation">Syntax Notation</a>
</h2>
<div>
<a name="rfc.section.1.3.p.1"></a>
</div>
<p>
This specification uses the Augmented Backus-Naur Form (ABNF) notation of
<a href="#RFC2234" title="Augmented BNF for Syntax Specifications: ABNF">[RFC2234]</a> to define the URI syntax.
Although the ABNF defines syntax in terms of the US-ASCII character
encoding <a href="#ASCII" title="Coded Character Set -- 7-bit American Standard Code for Information Interchange">[ASCII]</a>, the URI syntax should be interpreted
in terms of the character that the ASCII-encoded octet represents,
rather than the octet encoding itself.  How a URI is represented
in terms of bits and bytes on the wire is dependent upon
the character encoding of the protocol used to transport it, or the
charset of the document that contains it.
</p>
<div>
<a name="rfc.section.1.3.p.2"></a>
</div>
<p>
The following core ABNF productions are used by this specification
as defined by Section 6.1 of <a href="#RFC2234" title="Augmented BNF for Syntax Specifications: ABNF">[RFC2234]</a>:
ALPHA, CR, CTL, DIGIT, DQUOTE, HEXDIG, LF, OCTET, and SP.
The complete URI syntax is collected in <a href="#collected-abnf">appendix&nbsp;A</a>.
</p>


<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.iref.28"></a><a name="rfc.section.2">2</a>&nbsp;
    <a name="characters">Characters</a>
</h1>
<div>
<a name="rfc.figure.u.2"></a>
</div>
<p>
A URI consists of a restricted set of characters, primarily chosen to
aid transcription and usability both in computer systems and in
non-computer communications.  Characters used conventionally as
delimiters around a URI are excluded.  The set of URI characters
consists of digits, letters, and a few graphic symbols
chosen from those common to most of the character encodings and
input facilities available to Internet users.
<a name="rfc.iref.29"></a>

</p>
<pre>   uric        = reserved / unreserved / escaped
</pre>
<div>
<a name="rfc.section.2.p.2"></a>
</div>
<p>
Within a URI, reserved characters are used to delimit syntax components,
unreserved characters are used to describe registered names, and
unreserved, non-delimiting reserved, and escaped characters are used to
represent strings of data (1*OCTET) within the components.
</p>
<h2>
<a name="rfc.section.2.1">2.1</a>&nbsp;
    <a name="encoding">Encoding of Characters</a>
</h2>
<div>
<a name="rfc.section.2.1.p.1"></a>
</div>
<p>
As described <a href="#notation">above</a>, the URI syntax
is defined in terms of characters by reference to the US-ASCII encoding
of characters to octets.  This specification does not mandate the use of
any particular mapping between its character set and the octets used to
store or transmit those characters.
</p>
<div>
<a name="rfc.section.2.1.p.2"></a>
</div>
<p>
URI characters representing strings of data within a component may, if
allowed by the component production, represent an arbitrary sequence of
octets.  For example, portions of a given URI might correspond to a filename
on a non-ASCII file system, a query on non-ASCII data, numeric coordinates
on a map, etc.  Some URI schemes define a specific encoding of raw data
to US-ASCII characters as part of their scheme-specific requirements.
Most URI schemes represent data octets by the US-ASCII character
corresponding to that octet, either directly in the form of the
character's glyph or by use of an escape triplet (<a href="#escaped">section&nbsp;2.4</a>).
</p>
<div>
<a name="rfc.section.2.1.p.3"></a>
</div>
<p>
When a URI scheme defines a component that represents textual data
consisting of characters from the Unicode (ISO 10646) character
set, we recommend that the data be encoded first as octets according
to the UTF-8 <a href="#UTF-8" title="UTF-8, a transformation format of ISO 10646">[UTF-8]</a> character encoding, and then
escaping only those octets that are not in the unreserved character set.
</p>
<h2>
<a name="rfc.section.2.2">2.2</a>&nbsp;
    <a name="reserved">Reserved Characters</a>
</h2>
<div>
<a name="rfc.figure.u.3"></a>
</div>
<p>

<a name="rfc.iref.30"></a>
URIs include components and sub-components that are delimited by certain
special characters.  These characters are called "reserved", since
their usage within a URI component is limited to their reserved
purpose within that component.  If data for a URI component would
conflict with the reserved purpose, then the conflicting data must be
<a href="#escaped">escaped</a> before forming the URI.
<a name="rfc.iref.31"></a>

</p>
<pre>   reserved    = "/" / "?" / "#" / "[" / "]" / ";" /
                 ":" / "@" / "&amp;" / "=" / "+" / "$" / ","
</pre>
<div>
<a name="rfc.section.2.2.p.2"></a>
</div>
<p>
Reserved characters are used as delimiters of the generic URI
components described in <a href="#components">section&nbsp;3</a>, as well as within
those components for delimiting sub-components.  A component's ABNF
syntax rule will not use the "reserved" production directly; instead,
each rule lists those reserved characters that are allowed within
that component.  Allowed reserved characters that are not assigned a
sub-component delimiter role by this specification should be considered
reserved for special use by whatever software generates the URI (i.e.,
they may be used to delimit or indicate information that is significant
to interpretation of the identifier, but that significance is outside
the scope of this specification).  Outside of the URI's origin, a
reserved character cannot be escaped without fear of changing how
it will be interpreted; likewise, an escaped octet that corresponds
to a reserved character cannot be unescaped outside the software
that is responsible for interpreting it during URI resolution.
</p>
<div>
<a name="rfc.section.2.2.p.3"></a>
</div>
<p>
The slash ("/"), question-mark ("?"), and number-sign ("#") characters
are reserved in all URIs for the purpose of delimiting components
that are significant to the generic parser's hierarchical interpretation
of an identifier.  The hierarchical prefix of a URI, wherein the
slash ("/") character signifies a hierarchy delimiter, extends from
the <a href="#scheme">scheme</a> through to the first
question-mark ("?"), number-sign ("#"), or the end of the URI string.
In other words, the slash ("/") character is not treated as a
hierarchical separator within the query (<a href="#query">section&nbsp;3.4</a>) and
fragment (<a href="#fragment">section&nbsp;3.5</a>) components of a URI, but is
still considered reserved within those components for purposes
outside the scope of this specification.
</p>
<h2>
<a name="rfc.section.2.3">2.3</a>&nbsp;
    <a name="unreserved">Unreserved Characters</a>
</h2>
<div>
<a name="rfc.figure.u.4"></a>
</div>
<p>

<a name="rfc.iref.32"></a>
<a name="rfc.iref.33"></a>
Characters that are allowed in a URI but do not have a reserved
purpose are called unreserved.  These include uppercase and lowercase
letters, decimal digits, and a limited set of punctuation marks and
symbols.
<a name="rfc.iref.34"></a>
<a name="rfc.iref.35"></a>

</p>
<pre>   unreserved  = ALPHA / DIGIT / mark

   mark        = "-" / "_" / "." / "!" / "~" / "*" / "'" / "(" / ")"
</pre>
<div>
<a name="rfc.section.2.3.p.2"></a>
</div>
<p>
Escaping unreserved characters in a URI does not change what resource is
identified by that URI.  However, it may change the result of a
URI comparison (<a href="#comparison">section&nbsp;6</a>), potentially leading to
less efficient actions by an application.  Therefore, unreserved
characters should not be escaped unless the URI is being used in a
context that does not allow the unescaped character to appear.
URI normalization processes may unescape sequences in the
ranges of ALPHA (%41-%5A and %61-%7A), DIGIT (%30-%39), hyphen (%2D),
underscore (%5F), or tilde (%7E) without fear of creating a conflict,
but unescaping the other mark characters is usually counterproductive.
</p>
<h2>
<a name="rfc.section.2.4">2.4</a>&nbsp;
    <a name="escaped">Escaped Characters</a>
</h2>
<div>
<a name="rfc.section.2.4.p.1"></a>
</div>
<p>
Data must be escaped if it does not have a representation using an
unreserved character; this includes data that does not correspond to
a printable character of the US-ASCII coded character set or corresponds
to a US-ASCII character that delimits the component from others,
is reserved in that component for delimiting sub-components, or is
excluded from any use within a URI (<a href="#excluded">section&nbsp;2.5</a>).
</p>
<h3>
<a name="rfc.section.2.4.1">2.4.1</a>&nbsp;
    <a name="percent-encoding">Escaped Encoding</a>
</h3>
<div>
<a name="rfc.figure.u.5"></a>
</div>
<p>

<a name="rfc.iref.36"></a>
An escaped octet is encoded as a character triplet, consisting of the
percent character "%" followed by the two hexadecimal digits representing
that octet's numeric value.  For example, "%20" is the escaped encoding
for the binary octet "00100000" (ABNF: %x20), which corresponds to the
US-ASCII space character (SP).  This is sometimes referred to as
"percent-encoding" the octet.
<a name="rfc.iref.37"></a>

</p>
<pre>   escaped     = "%" HEXDIG HEXDIG
</pre>
<p>
The uppercase hexadecimal digits 'A' through 'F' are equivalent to the
lowercase digits 'a' through 'f', respectively.  Two URIs that differ
only in the case of hexadecimal digits used in escaped octets are
equivalent.  For consistency, we recommend that uppercase digits be
used by URI generators and normalizers.
</p>
<h3>
<a name="rfc.section.2.4.2">2.4.2</a>&nbsp;
    <a name="when-to-escape">When to Escape and Unescape</a>
</h3>
<div>
<a name="rfc.section.2.4.2.p.1"></a>
</div>
<p>
Under normal circumstances, the only time that characters within a
URI string are escaped is during the process of generating the URI from
its component parts.  Each component may have its own set of characters
that are reserved, so only the mechanism responsible for generating or
interpreting that component can determine whether or not escaping a
character will change its semantics.  The exception is when a URI is
being used within a context where the unreserved "mark" characters
might need to be escaped, such as when used for a command-line argument
or within a single-quoted attribute.
</p>
<div>
<a name="rfc.section.2.4.2.p.2"></a>
</div>
<p>
Once generated, a URI is always in an escaped form.  When a URI is
resolved, the components significant to that scheme-specific
resolution process (if any) must be parsed and separated before the
escaped characters within those components can be safely unescaped.
</p>
<div>
<a name="rfc.section.2.4.2.p.3"></a>
</div>
<p>
In some cases, data that could be represented by an unreserved
character may appear escaped; for example, some of the unreserved
"mark" characters are automatically escaped by some systems.  A URI
normalizer may unescape escaped octets that are represented by characters
in the unreserved set.  For example, "%7E" is sometimes used instead
of tilde ("~") in an "http" URI path and can be converted to "~"
without changing the interpretation of the URI.
</p>
<div>
<a name="rfc.section.2.4.2.p.4"></a>
</div>
<p>
In all cases, a URI character is equivalent to its corresponding
ASCII-encoded octet, even when that octet is represented as a percent-escape.
URI characters are provided as an external ASCII interface for identification
between systems.  A system that internally provides identifiers in the
form of a different character encoding, such as EBCDIC, will generally
perform character translation of textual identifiers to UTF-8 at some
internal interface, thus providing meaningful identifiers in ASCII even
though the back-end identifiers are in a different encoding.  Escaped
octets must be unescaped before such a transcoding is applied.  Although
this specification does not define the character encoding of escaped
octets outside the ASCII range, the general principle of unescaping
before transcoding should be applied for all character encodings.
</p>
<div>
<a name="rfc.section.2.4.2.p.5"></a>
</div>
<p>
Because the percent ("%") character serves as the escape indicator,
it must be escaped as "%25" in order for that octet to be used as data
within a URI.  Implementers should be careful not to escape or unescape
the same string more than once, since unescaping an already unescaped
string might lead to misinterpreting a percent data character as
another escaped character, or vice versa in the case of escaping
an already escaped string.
</p>
<h2>
<a name="rfc.iref.38"></a><a name="rfc.section.2.5">2.5</a>&nbsp;
    <a name="excluded">Excluded Characters</a>
</h2>
<div>
<a name="rfc.figure.u.6"></a>
</div>
<p>
Although they are disallowed within the URI syntax, we include here a
description of those characters that have been excluded and
the reasons for their exclusion.
</p>
<pre>   excluded    = invisible / delims / unwise
</pre>
<div>
<a name="rfc.figure.u.7"></a>
</div>
<p>

<a name="rfc.iref.39"></a>
The control characters (CTL) in the US-ASCII coded character set are not
used within a URI, both because they are non-printable and because
they are likely to be misinterpreted by some control mechanisms.
The space character (SP) is excluded because significant spaces may
disappear and insignificant spaces may be introduced when a URI is
transcribed, typeset, or subjected to the treatment of word-processing
programs.  Whitespace is also used to delimit a URI in many contexts.
Characters outside the US-ASCII set are excluded as well.
</p>
<pre>   invisible   = CTL / SP / %x80-FF
</pre>
<div>
<a name="rfc.figure.u.8"></a>
</div>
<p>

<a name="rfc.iref.40"></a>
The angle-bracket ("&lt;" and "&gt;") and double-quote (") characters are
excluded because they are often used as the delimiters around a URI in
text documents and protocol fields.  The percent character ("%")
is excluded because it is used for the encoding of 
<a href="#escaped">escaped</a> characters.
</p>
<pre>   delims      = "&lt;" / "&gt;" / "%" / DQUOTE
</pre>
<div>
<a name="rfc.figure.u.9"></a>
</div>
<p>

<a name="rfc.iref.41"></a>
Other characters are excluded because gateways and other transport
agents are known to sometimes modify such characters.
</p>
<pre>   unwise      = "{" / "}" / "|" / "\" / "^" / "`"
</pre>
<div>
<a name="rfc.section.2.5.p.5"></a>
</div>
<p>
Data octets corresponding to excluded characters must be escaped in order to
be represented within a URI.
</p>


<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.iref.42"></a><a name="rfc.iref.43"></a><a name="rfc.iref.44"></a><a name="rfc.iref.45"></a><a name="rfc.iref.46"></a><a name="rfc.iref.47"></a><a name="rfc.iref.48"></a><a name="rfc.section.3">3</a>&nbsp;
    <a name="components">Syntax Components</a>
</h1>
<div>
<a name="rfc.figure.u.10"></a>
</div>
<p>
The generic URI syntax consists of a hierarchical sequence of components
referred to as the scheme, authority, path, query, and fragment.
<a name="rfc.iref.49"></a>
<a name="rfc.iref.50"></a>
<a name="rfc.iref.51"></a>
<a name="rfc.iref.52"></a>
<a name="rfc.iref.53"></a>
<a name="rfc.iref.54"></a>
<a name="rfc.iref.55"></a>
<a name="rfc.iref.56"></a>
<a name="rfc.iref.57"></a>
<a name="rfc.iref.58"></a>

</p>
<pre>   URI         = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

   hier-part   = net-path / abs-path / rel-path

   net-path    = "//" authority [ abs-path ]
   abs-path    = "/"  path-segments
   rel-path    = path-segments
</pre>
<p>
The scheme and path components are required, though path may be empty
(no characters).  An ABNF-driven parser of hier-part will find
that the three productions in the rule are ambiguous: they are
disambiguated by the "first-match-wins" (a.k.a. "greedy") algorithm.
In other words, if the string begins with two slash characters ("//"),
then it is a net-path; if it begins with only one slash character,
then it is an abs-path; otherwise, it is a rel-path.  Note that
rel-path does not necessarily contain any slash ("/") characters; a
non-hierarchical path will be treated as opaque data by a generic
URI parser.
</p>
<div>
<a name="rfc.section.3.p.2"></a>
</div>
<p>
The authority component is only present when a string matches the
net-path production.  Since the presence of an authority component
restricts the remaining syntax for path, we have not included a
specific "path" rule in the syntax.  Instead, what we refer to as
the URI path is that part of the parsed URI string matching the
abs-path or rel-path production in the syntax above, since they are
mutually exclusive for any given URI and can be parsed as a single
component.
</p>
<h2>
<a name="rfc.iref.59"></a><a name="rfc.section.3.1">3.1</a>&nbsp;
    <a name="scheme">Scheme</a>
</h2>
<div>
<a name="rfc.section.3.1.p.1"></a>
</div>
<p>
Each URI begins with a scheme name that refers to a specification for
assigning identifiers within that scheme. As such, the URI syntax is a
federated and extensible naming system wherein each scheme's specification
may further restrict the syntax and semantics of identifiers using that
scheme. 
</p>
<div>
<a name="rfc.figure.u.11"></a>
</div>
<p>
Scheme names consist of a sequence of characters beginning with a
letter and followed by any combination of letters, digits, plus ("+"),
period ("."), or hyphen ("-").  Although scheme is case-insensitive,
the canonical form is lowercase and documents that specify schemes
must do so using lowercase letters.  An implementation should accept
uppercase letters as equivalent to lowercase in scheme names
(e.g., allow "HTTP" as well as "http"), for the sake of robustness,
but should only generate lowercase scheme names, for consistency.
<a name="rfc.iref.60"></a>

</p>
<pre>   scheme      = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )
</pre>
<p>
Individual schemes are not specified by this document.
The process for registration of new URI schemes is defined separately
by <a href="#RFC2717" title="Registration Procedures for URL Scheme Names">[RFC2717]</a>.  The scheme registry maintains the mapping
between scheme names and their specifications.
</p>
<h2>
<a name="rfc.iref.61"></a><a name="rfc.section.3.2">3.2</a>&nbsp;
    <a name="authority">Authority</a>
</h2>
<div>
<a name="rfc.section.3.2.p.1"></a>
</div>
<p>
Many URI schemes include a hierarchical element for a naming
authority, such that governance of the name space defined by the
remainder of the URI is delegated to that authority (which may,
in turn, delegate it further).  The generic syntax provides a common
means for distinguishing an authority based on a registered domain name
or server address, along with optional port and user information.
</p>
<div>
<a name="rfc.figure.u.12"></a>
</div>
<p>
The authority component is preceded by a double slash ("//") and is
terminated by the next slash ("/"), question-mark ("?"), or
number-sign ("#") character, or by the end of the URI.
<a name="rfc.iref.62"></a>
<a name="rfc.iref.63"></a>
<a name="rfc.iref.64"></a>
<a name="rfc.iref.65"></a>

</p>
<pre>   authority   = [ userinfo "@" ] host [ ":" port ]
</pre>
<p>
The parts "&lt;userinfo&gt;@" and ":&lt;port&gt;" may be omitted.
</p>
<div>
<a name="rfc.section.3.2.p.3"></a>
</div>
<p>
Some schemes do not allow the userinfo and/or port sub-components.
When presented with a URI that violates one or more scheme-specific
restrictions, the scheme-specific URI resolution process should flag
the reference as an error rather than ignore the unused parts; doing so
reduces the number of equivalent URIs and helps detect abuses of the
generic syntax that might indicate the URI has been constructed to
mislead the user (<a href="#security-semantic">section&nbsp;7.5</a>).
</p>
<h3>
<a name="rfc.iref.66"></a><a name="rfc.section.3.2.1">3.2.1</a>&nbsp;
    <a name="userinfo">User Information</a>
</h3>
<div>
<a name="rfc.figure.u.13"></a>
</div>
<p>
The userinfo sub-component may consist of a user name and, optionally,
scheme-specific information about how to gain authorization to access
the server.  The user information, if present, is followed by a
commercial at-sign ("@") that delimits it from the host.
<a name="rfc.iref.67"></a>

</p>
<pre>   userinfo    = *( unreserved / escaped / ";" /
                    ":" / "&amp;" / "=" / "+" / "$" / "," )
</pre>
<div>
<a name="rfc.section.3.2.1.p.2"></a>
</div>
<p>
Some URI schemes use the format "user:password" in the userinfo
field. This practice is NOT RECOMMENDED, because the passing of
authentication information in clear text has proven to
be a security risk in almost every case where it has been used.
Note also that userinfo might be crafted to look like a trusted
domain name in order to mislead users, as described in
<a href="#security-semantic">section&nbsp;7.5</a>.
</p>
<h3>
<a name="rfc.iref.68"></a><a name="rfc.section.3.2.2">3.2.2</a>&nbsp;
    <a name="host">Host</a>
</h3>
<div>
<a name="rfc.figure.u.14"></a>
</div>
<p>
The host sub-component of authority is identified by an IPv6 literal
encapsulated within square brackets, an IPv4 address in dotted-decimal form,
or a domain name.
<a name="rfc.iref.69"></a>

</p>
<pre>   host        = [ IPv6reference / IPv4address / hostname ]
</pre>
<p>
If host is omitted, a default may be defined by the scheme-specific
semantics of the URI.  For example, the "file" URI scheme defaults to
"localhost", whereas the "http" URI scheme does not allow host to be
omitted.
</p>
<div>
<a name="rfc.section.3.2.2.p.2"></a>
</div>
<p>
The production for host is ambiguous because it does not completely
distinguish between an IPv4address and a hostname.  Again, the
"first-match-wins" algorithm applies: If host matches the production for
IPv4address, then it should be considered an IPv4 address literal
and not a hostname.
</p>
<div>
<a name="rfc.figure.u.15"></a>
</div>
<p>

<a name="rfc.iref.70"></a>
<a name="rfc.iref.71"></a>
<a name="rfc.iref.72"></a>
<a name="rfc.iref.73"></a>
A hostname takes the form described in Section 3 of <a href="#RFC1034" title="Domain names - concepts and facilities">[RFC1034]</a>
and Section 2.1 of <a href="#RFC1123" title="Requirements for Internet Hosts - Application and Support">[RFC1123]</a>: a sequence of domain labels
separated by ".", each domain label starting and ending with an alphanumeric
character and possibly also containing "-" characters.  The rightmost
domain label of a fully qualified domain name may be followed by a
single "." if it is necessary to distinguish between the complete
domain name and some local domain.
<a name="rfc.iref.74"></a>
<a name="rfc.iref.75"></a>
<a name="rfc.iref.76"></a>
<a name="rfc.iref.77"></a>

</p>
<pre>   hostname    = domainlabel qualified
   qualified   = *( "." domainlabel ) [ "." ]
   domainlabel = alphanum [ 0*61( alphanum / "-" ) alphanum ]
   alphanum    = ALPHA / DIGIT
</pre>
<div>
<a name="rfc.figure.u.16"></a>
</div>
<p>

<a name="rfc.iref.78"></a>
<a name="rfc.iref.79"></a>
<a name="rfc.iref.80"></a>
A host identified by an IPv4 literal address is represented in
dotted-decimal notation (a sequence of four decimal numbers in the
range 0 to 255, separated by "."), as described in <a href="#RFC1123" title="Requirements for Internet Hosts - Application and Support">[RFC1123]</a>
by reference to <a href="#RFC0952" title="DoD Internet host table specification">[RFC0952]</a>.  Note that other forms of
dotted notation may be interpreted on some platforms, as described in
<a href="#security-ipv4">section&nbsp;7.3</a>, but only the dotted-decimal form of
four octets is allowed by this grammar.
<a name="rfc.iref.81"></a>
<a name="rfc.iref.82"></a>

</p>
<pre>   IPv4address = dec-octet "." dec-octet "." dec-octet "." dec-octet

   dec-octet   = DIGIT                 ; 0-9
               / %x31-39 DIGIT         ; 10-99
               / "1" 2DIGIT            ; 100-199
               / "2" %x30-34 DIGIT     ; 200-249
               / "25" %x30-35          ; 250-255
</pre>
<div>
<a name="rfc.figure.u.17"></a>
</div>
<p>

<a name="rfc.iref.83"></a>
<a name="rfc.iref.84"></a>
<a name="rfc.iref.85"></a>
<a name="rfc.iref.86"></a>
<a name="rfc.iref.87"></a>
A host identified by an IPv6 literal address <a href="#RFC3513" title="Internet Protocol Version 6 (IPv6) Addressing Architecture">[RFC3513]</a>
is distinguished by enclosing the IPv6 literal within square-brackets
("[" and "]").  This is the only place where square-bracket characters
are allowed in the URI syntax.
<a name="rfc.iref.88"></a>
<a name="rfc.iref.89"></a>
<a name="rfc.iref.90"></a>
<a name="rfc.iref.91"></a>

</p>
<pre>   IPv6reference = "[" IPv6address "]"

   IPv6address =                          6( h4 ":" ) ls32
               /                     "::" 5( h4 ":" ) ls32
               / [              h4 ] "::" 4( h4 ":" ) ls32
               / [ *1( h4 ":" ) h4 ] "::" 3( h4 ":" ) ls32
               / [ *2( h4 ":" ) h4 ] "::" 2( h4 ":" ) ls32
               / [ *3( h4 ":" ) h4 ] "::"    h4 ":"   ls32
               / [ *4( h4 ":" ) h4 ] "::"             ls32
               / [ *5( h4 ":" ) h4 ] "::"             h4
               / [ *6( h4 ":" ) h4 ] "::"

   ls32        = ( h4 ":" h4 ) / IPv4address
               ; least-significant 32 bits of address

   h4          = 1*4HEXDIG
</pre>
<div>
<a name="rfc.section.3.2.2.p.6"></a>
</div>
<p>
The presence of host within a URI does not imply that the scheme
requires access to the given host on the Internet.  In many cases,
the host syntax is used only for the sake of reusing the existing
registration process created and deployed for DNS, thus obtaining a
globally unique name without the cost of deploying another registry.
However, such use comes with its own costs: domain name ownership
may change over time for reasons not anticipated by the URI creator.
</p>
<h3>
<a name="rfc.iref.92"></a><a name="rfc.section.3.2.3">3.2.3</a>&nbsp;
    <a name="port">Port</a>
</h3>
<div>
<a name="rfc.figure.u.18"></a>
</div>
<p>
The port sub-component of authority is designated by an optional
port number in decimal following the host and delimited from it by
a single colon (":") character.
<a name="rfc.iref.93"></a>

</p>
<pre>   port        = *DIGIT
</pre>
<p>
If port is omitted, a default may be defined by the scheme-specific
semantics of the URI.  Likewise, the type of network port designated by
the port number (e.g., TCP, UDP, SCTP, etc.) is defined by the URI scheme.
For example, the "http" URI scheme defines a default of TCP port 80.
</p>
<h2>
<a name="rfc.iref.94"></a><a name="rfc.iref.95"></a><a name="rfc.iref.96"></a><a name="rfc.iref.97"></a><a name="rfc.iref.101"></a><a name="rfc.section.3.3">3.3</a>&nbsp;
    <a name="path">Path</a>
</h2>
<div>
<a name="rfc.figure.u.19"></a>
</div>
<p>
The path component contains hierarchical data that, along with data
in the optional <a href="#query">query</a> component, serves
to identify a resource within the scope of that URI's scheme and
naming authority (if any).  There is no specific "path" syntax
production in the generic URI syntax.  Instead, what we refer to as
the URI path is that part of the parsed URI string matching either
the abs-path or the rel-path production, since they are mutually
exclusive for any given URI and can be parsed as a single component.
The path is terminated by the first question-mark ("?") or
number-sign ("#") character, or by the end of the URI.
<a name="rfc.iref.98"></a>
<a name="rfc.iref.99"></a>
<a name="rfc.iref.100"></a>

</p>
<pre>   path-segments = segment *( "/" segment )
   segment       = *pchar

   pchar         = unreserved / escaped / ";" /
                   ":" / "@" / "&amp;" / "=" / "+" / "$" / ","
</pre>
<div>
<a name="rfc.section.3.3.p.2"></a>
</div>
<p>
The path consists of a sequence of path segments separated by a
slash ("/") character.  A path is always defined for a URI, though
the defined path may be empty (zero length) or opaque (not containing
any "/" delimiters).  For example, the URI &lt;mailto:fred@example.com&gt;
has a path of "fred@example.com".
</p>
<div>
<a name="rfc.section.3.3.p.3"></a>
</div>
<p>
The path segments "." and ".." are defined for relative reference within
the path name hierarchy.  They are intended for use at the beginning of
a relative path reference (<a href="#relative-uri">section&nbsp;4.2</a>) for indicating
relative position within the hierarchical tree of names, with a similar
effect to how they are used within some operating systems' file directory
structure to indicate the current directory and parent directory,
respectively.  Unlike a file system, however, these dot-segments are
only interpreted within the URI path hierarchy and are removed
as part of the URI normalization or resolution process, as described in
<a href="#absolutize">section&nbsp;5.2</a>.
</p>
<div>
<a name="rfc.section.3.3.p.4"></a>
</div>
<p>
Aside from dot-segments in hierarchical paths, a path segment is
considered opaque by the generic syntax.  URI generating applications
often use the reserved characters allowed in segment for the purpose
of delimiting scheme-specific or generator-specific sub-components.
For example, the semicolon (";") and equals ("=") reserved characters
are often used for delimiting parameters and parameter values
applicable to that segment.  The comma (",") reserved character is often
used for similar purposes.  For example, one URI generator might use
a segment like "name;v=1.1" to indicate a reference to version 1.1 of "name",
whereas another might use a segment like "name,1.1" to indicate the same.
Parameter types may be defined by scheme-specific semantics, but in most
cases the meaning of a parameter is specific to the URI originator.
</p>
<h2>
<a name="rfc.section.3.4">3.4</a>&nbsp;
    <a name="query">Query</a>
</h2>
<div>
<a name="rfc.figure.u.20"></a>
</div>
<p>

<a name="rfc.iref.102"></a>
The query component contains non-hierarchical data that, along with data
in the <a href="#path">path</a> component, serves to identify a
resource within the scope of that URI's scheme and naming authority (if any).
The query component is indicated by the first question-mark ("?") character 
and terminated by a number-sign ("#") character or by the end of the URI.
<a name="rfc.iref.103"></a>
<a name="rfc.iref.104"></a>

</p>
<pre>   query       = *( pchar / "/" / "?" )
</pre>
<div>
<a name="rfc.section.3.4.p.2"></a>
</div>
<p>
The characters slash ("/") and question-mark ("?") are allowed to
represent data within the query component, but such use is discouraged;
incorrect implementations of reference resolution often fail to
distinguish them from hierarchical separators, thus resulting in
non-interoperable results while parsing relative references.  However,
since query components are often used to carry identifying information
in the form of "key=value" pairs, and one frequently used value is a
reference to another URI, it is sometimes better for usability to
include those characters unescaped.
</p>
<dl>

<dd style="margin-top: .5em">
Note: Some client applications will fail to separate a reference's
query component from its path component before merging the base and
reference paths (<a href="#absolutize">section&nbsp;5.2</a>).  This may result in
loss of information if the query component contains the strings
"/../" or "/./".
</dd>

</dl>
<p>

</p>
<h2>
<a name="rfc.section.3.5">3.5</a>&nbsp;
    <a name="fragment">Fragment</a>
</h2>
<div>
<a name="rfc.figure.u.21"></a>
</div>
<p>

<a name="rfc.iref.105"></a>
The fragment identifier component allows indirect identification of a
secondary resource by reference to a primary resource and additional
identifying information that is selective within that resource.
The identified secondary resource may be some portion or subset of
the primary resource, some view on representations of the primary
resource, or some other resource that is merely named within the primary
resource.  A fragment identifier component is indicated by the presence of
a number-sign ("#") character and terminated by the end of the URI string.
<a name="rfc.iref.106"></a>
<a name="rfc.iref.107"></a>

</p>
<pre>   fragment    = *( pchar / "/" / "?" )
</pre>
<div>
<a name="rfc.section.3.5.p.2"></a>
</div>
<p>
The semantics of a fragment identifier are defined by the set of
representations that might result from a retrieval action on the primary
resource. The fragment's format and resolution is therefore dependent on
the media type <a href="#RFC2046" title="Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types">[RFC2046]</a> of the retrieved representation,
even though such a retrieval is only performed if the URI is dereferenced.
Individual media types may define their own restrictions on, or structure
within, the fragment identifier syntax for specifying different types of
subsets, views, or external references that are identifiable as secondary
resources by that media type.  If the primary resource is represented by
multiple media types, as is often the case for resources whose representation
is selected based on attributes of the retrieval request, then interpretation
of the fragment identifier must be consistent across all of those
media types in order for it to be viable as an identifier.
</p>
<div>
<a name="rfc.section.3.5.p.3"></a>
</div>
<p>
As with any URI, use of a fragment identifier component does not imply
that a retrieval action will take place.  A URI with a fragment identifier
may be used to refer to the secondary resource without any implication
that the primary resource is accessible.  However, if that URI is used
in a context that does call for retrieval and is not a same-document
reference (<a href="#same-document">section&nbsp;4.4</a>), the fragment identifier is
only valid as a reference if a retrieval action on the primary resource
succeeds and results in a representation for which the fragment identifier
is meaningful.
</p>
<div>
<a name="rfc.section.3.5.p.4"></a>
</div>
<p>
Fragment identifiers have a special role in information systems as
the primary form of client-side indirect referencing, allowing
an author to specifically identify those aspects of an existing
resource that are only indirectly provided by the resource owner.
As such, interpretation of the fragment identifier during a retrieval
action is performed solely by the user agent; the fragment identifier
is not passed to other systems during the process of retrieval.
Although this is often perceived to be a loss of information,
particularly in regards to accurate redirection of references as
content moves over time, it also serves to prevent information
providers from denying reference authors the right to selectively
refer to information within a resource.
</p>
<div>
<a name="rfc.section.3.5.p.5"></a>
</div>
<p>
The characters slash ("/") and question-mark ("?") are allowed to
represent data within the fragment identifier, but such use is
discouraged for the same reasons as described above for query.
</p>


<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.4">4</a>&nbsp;
    <a name="usage">Usage</a>
</h1>
<div>
<a name="rfc.section.4.p.1"></a>
</div>
<p>
When applications make reference to a URI, they do not always use the
full form of reference defined by the "URI" syntax production.
In order to save space and take advantage of hierarchical locality,
many Internet protocol elements and media type formats allow an
abbreviation of a URI, while others restrict the syntax to a particular
form of URI.  We define the most common forms of reference syntax in
this specification because they impact and depend upon the design of
the generic syntax, requiring a uniform parsing algorithm
in order to be interpreted consistently.
</p>
<h2>
<a name="rfc.iref.108"></a><a name="rfc.section.4.1">4.1</a>&nbsp;
    <a name="uri-reference">URI Reference</a>
</h2>
<div>
<a name="rfc.figure.u.22"></a>
</div>
<p>
The ABNF rule URI-reference is used to denote the most common usage of a
resource identifier.
<a name="rfc.iref.109"></a>
<a name="rfc.iref.110"></a>
<a name="rfc.iref.111"></a>

</p>
<pre>   URI-reference = URI / relative-URI
</pre>
<p>
A URI-reference may be relative:
if the reference string's prefix matches the syntax of a scheme followed by
its colon separator, then the reference is a URI rather than a relative-URI.
</p>
<div>
<a name="rfc.section.4.1.p.2"></a>
</div>
<p>
A URI-reference is typically parsed first into the five URI components,
in order to determine what components are present and whether or not the
reference is relative, and then each component is parsed for
its subparts and their validation.  The ABNF of URI-reference, along with
the "first-match-wins" disambiguation rule, is sufficient to define a
validating parser for the generic syntax.  Readers familiar with
regular expressions should see <a href="#regexp">appendix&nbsp;B</a> for an example
of a non-validating URI-reference parser that will take any given
string and extract the URI components.
</p>
<h2>
<a name="rfc.iref.112"></a><a name="rfc.iref.113"></a><a name="rfc.iref.114"></a><a name="rfc.iref.115"></a><a name="rfc.section.4.2">4.2</a>&nbsp;
    <a name="relative-uri">Relative URI</a>
</h2>
<div>
<a name="rfc.figure.u.23"></a>
</div>
<p>
A relative URI reference takes advantage of the hier-part syntax
(<a href="#components">section&nbsp;3</a>) in order to express a reference that is
relative to the name space of another hierarchical URI.
<a name="rfc.iref.116"></a>
<a name="rfc.iref.117"></a>
<a name="rfc.iref.118"></a>
<a name="rfc.iref.119"></a>

</p>
<pre>   relative-URI  = hier-part [ "?" query ] [ "#" fragment ]
</pre>
<p>
The URI referred to by a relative reference is obtained by applying
the reference resolution algorithm of <a href="#reference-resolution">section&nbsp;5</a>.
</p>
<div>
<a name="rfc.section.4.2.p.2"></a>
</div>
<p>
A relative reference that begins with two slash characters is termed a
network-path reference; such references are rarely used.
A relative reference that begins with a single slash character is
termed an absolute-path reference.  A relative reference that does not
begin with a slash character is termed a relative-path reference.
</p>
<div>
<a name="rfc.section.4.2.p.3"></a>
</div>
<p>
A path segment that contains a colon character (e.g., "this:that")
cannot be used as the first segment of a relative-path reference
because it would be mistaken for a scheme name.  Such a segment must be
preceded by a dot-segment (e.g., "./this:that") to make a relative-path
reference.
</p>
<h2>
<a name="rfc.iref.120"></a><a name="rfc.iref.121"></a><a name="rfc.section.4.3">4.3</a>&nbsp;
    <a name="absolute-uri">Absolute URI</a>
</h2>
<div>
<a name="rfc.figure.u.24"></a>
</div>
<p>
Some protocol elements allow only the absolute form of a URI without
a fragment identifier.  For example, defining the base URI for later
use by relative references calls for an absolute-URI production that
does not allow a fragment.
<a name="rfc.iref.122"></a>
<a name="rfc.iref.123"></a>
<a name="rfc.iref.124"></a>
<a name="rfc.iref.125"></a>

</p>
<pre>   absolute-URI  = scheme ":" hier-part [ "?" query ]
</pre>
<h2>
<a name="rfc.iref.126"></a><a name="rfc.section.4.4">4.4</a>&nbsp;
    <a name="same-document">Same-document Reference</a>
</h2>
<div>
<a name="rfc.section.4.4.p.1"></a>
</div>
<p>
When a URI reference occurring within a document or message refers
to a URI that is, aside from its fragment component (if any),
identical to the base URI (<a href="#base-uri">section&nbsp;5.1</a>), that reference
is called a "same-document" reference.  The most frequent examples
of same-document references are relative references that are empty
or include only the number-sign ("#") separator followed by a fragment
identifier.
</p>
<div>
<a name="rfc.section.4.4.p.2"></a>
</div>
<p>
When a same-document reference is dereferenced for the purpose of a
retrieval action, the target of that reference is defined to be within
that current document or message; the dereference should not result in
a new retrieval.
</p>
<h2>
<a name="rfc.iref.127"></a><a name="rfc.section.4.5">4.5</a>&nbsp;
    <a name="suffix">Suffix Reference</a>
</h2>
<div>
<a name="rfc.section.4.5.p.1"></a>
</div>
<p>
The URI syntax is designed for unambiguous reference to resources and
extensibility via the URI scheme.  However, as URI identification and
usage have become commonplace, traditional media (television, radio,
newspapers, billboards, etc.) have increasingly used a suffix of
the URI as a reference, consisting of only the authority and path
portions of the URI, such as
</p>
<div>
<a name="rfc.figure.u.25"></a>
</div>
<pre>   www.w3.org/Addressing/
</pre>
<div>
<a name="rfc.section.4.5.p.3"></a>
</div>
<p>
or simply the DNS hostname on its own.  Such references are primarily
intended for human interpretation rather than machine, with the
assumption that context-based heuristics are sufficient to complete
the URI (e.g., most hostnames beginning with "www" are likely to have
a URI prefix of "http://").  Although there is no standard set of
heuristics for disambiguating a URI suffix, many client implementations
allow them to be entered by the user and heuristically resolved.
It should be noted that such heuristics may change over time,
particularly when new URI schemes are introduced.
</p>
<div>
<a name="rfc.section.4.5.p.4"></a>
</div>
<p>
Since a URI suffix has the same syntax as a relative path reference, a
suffix reference cannot be used in contexts where a relative reference
is expected.  As a result, suffix references are limited to those places where
there is no defined base URI, such as dialog boxes and off-line advertisements.
</p>


<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.iref.128"></a><a name="rfc.iref.129"></a><a name="rfc.section.5">5</a>&nbsp;
    <a name="reference-resolution">Reference Resolution</a>
</h1>
<div>
<a name="rfc.section.5.p.1"></a>
</div>
<p>
This section defines the process of resolving a URI reference within
a context that allows relative references, such that the result is a
string matching the "URI" syntax production of <a href="#components">section&nbsp;3</a>.
</p>
<h2>
<a name="rfc.iref.130"></a><a name="rfc.section.5.1">5.1</a>&nbsp;
    <a name="base-uri">Establishing a Base URI</a>
</h2>
<div>
<a name="rfc.section.5.1.p.1"></a>
</div>
<p>
The term "relative" implies that there exists some "base URI" against
which the relative reference is applied.  Aside from same-document
references (<a href="#same-document">section&nbsp;4.4</a>, relative references are
only usable if the base URI is known.  The base URI must be established
by the parser prior to parsing URI references that might be relative.
</p>
<div>
<a name="rfc.section.5.1.p.2"></a>
</div>
<p>
The base URI of a document can be established in one of four ways,
listed below in order of precedence.  The order of precedence can be
thought of in terms of layers, where the innermost defined base URI
has the highest precedence.  This can be visualized graphically as:
</p>
<div>
<a name="rfc.figure.u.26"></a>
</div>
<pre>   .----------------------------------------------------------.
   |  .----------------------------------------------------.  |
   |  |  .----------------------------------------------.  |  |
   |  |  |  .----------------------------------------.  |  |  |
   |  |  |  |  .----------------------------------.  |  |  |  |
   |  |  |  |  |       &lt;relative-reference&gt;       |  |  |  |  |
   |  |  |  |  `----------------------------------'  |  |  |  |
   |  |  |  | (5.1.1) Base URI embedded in the       |  |  |  |
   |  |  |  |         document's content             |  |  |  |
   |  |  |  `----------------------------------------'  |  |  |
   |  |  | (5.1.2) Base URI of the encapsulating entity |  |  |
   |  |  |         (message, document, or none).        |  |  |
   |  |  `----------------------------------------------'  |  |
   |  | (5.1.3) URI used to retrieve the entity            |  |
   |  `----------------------------------------------------'  |
   | (5.1.4) Default Base URI is application-dependent        |
   `----------------------------------------------------------'
</pre>
<h3>
<a name="rfc.section.5.1.1">5.1.1</a>&nbsp;
    <a name="base-context">Base URI within Document Content</a>
</h3>
<div>
<a name="rfc.section.5.1.1.p.1"></a>
</div>
<p>
Within certain document media types, the base URI of the document can
be embedded within the content itself such that it can be readily
obtained by a parser.  This can be useful for descriptive documents,
such as tables of content, which may be transmitted to others through
protocols other than their usual retrieval context (e.g., E-Mail or
USENET news).
</p>
<div>
<a name="rfc.section.5.1.1.p.2"></a>
</div>
<p>
It is beyond the scope of this document to specify how, for each
media type, the base URI can be embedded.  It is assumed that user
agents manipulating such media types will be able to obtain the
appropriate syntax from that media type's specification.
</p>
<div>
<a name="rfc.section.5.1.1.p.3"></a>
</div>
<p>
A mechanism for embedding the base URI within MIME container types
(e.g., the message and multipart types) is defined by MHTML
<a href="#RFC2110" title="MIME E-mail Encapsulation of Aggregate Documents, such as HTML (MHTML)">[RFC2110]</a>.  Protocols that do not use the MIME message
header syntax, but do allow some form of tagged metadata to be included
within messages, may define their own syntax for defining the base
URI as part of a message.
</p>
<h3>
<a name="rfc.section.5.1.2">5.1.2</a>&nbsp;
    <a name="base-encapsulated">Base URI from the Encapsulating Entity</a>
</h3>
<div>
<a name="rfc.section.5.1.2.p.1"></a>
</div>
<p>
If no base URI is embedded, the base URI of a document is defined by
the document's retrieval context.  For a document that is enclosed
within another entity (such as a message or another document), the
retrieval context is that entity; thus, the default base URI of the
document is the base URI of the entity in which the document is
encapsulated.
</p>
<h3>
<a name="rfc.section.5.1.3">5.1.3</a>&nbsp;
    <a name="base-retrieval">Base URI from the Retrieval URI</a>
</h3>
<div>
<a name="rfc.section.5.1.3.p.1"></a>
</div>
<p>
If no base URI is embedded and the document is not encapsulated
within some other entity (e.g., the top level of a composite entity),
then, if a URI was used to retrieve the base document, that URI shall
be considered the base URI.  Note that if the retrieval was the
result of a redirected request, the last URI used (i.e., that which
resulted in the actual retrieval of the document) is the base URI.
</p>
<h3>
<a name="rfc.section.5.1.4">5.1.4</a>&nbsp;
    <a name="base-default">Default Base URI</a>
</h3>
<div>
<a name="rfc.section.5.1.4.p.1"></a>
</div>
<p>
If none of the conditions described in above apply,
then the base URI is defined by the context of the application.
Since this definition is necessarily application-dependent, failing
to define the base URI using one of the other methods may result in
the same content being interpreted differently by different types of
application.
</p>
<div>
<a name="rfc.section.5.1.4.p.2"></a>
</div>
<p>
It is the responsibility of the distributor(s) of a document
containing a relative reference to ensure that the base URI for that document
can be established.  It must be emphasized that a relative reference,
aside from a same-document reference, cannot be used reliably in
situations where the document's base URI is not well-defined.
</p>
<h2>
<a name="rfc.iref.131"></a><a name="rfc.iref.132"></a><a name="rfc.section.5.2">5.2</a>&nbsp;
    <a name="absolutize">Obtaining the Referenced URI</a>
</h2>
<div>
<a name="rfc.section.5.2.p.1"></a>
</div>
<p>
This section describes an example algorithm for resolving URI
references that might be relative to a given base URI.  The algorithm
is intended to provide a definitive result that can be used to test
the output of other implementations.  Implementation of the algorithm
itself is not required, but the result given by an implementation must
match the result that would be given by this algorithm.
</p>
<div>
<a name="rfc.section.5.2.p.2"></a>
</div>
<p>
The base URI (Base) is established according to the rules of
<a href="#base-uri">section&nbsp;5.1</a> and parsed into the five main components
described in <a href="#components">section&nbsp;3</a>.  Note that only the scheme
component is required to be present in the base URI; the other components
may be empty or undefined.  A component is undefined if its preceding
separator does not appear in the URI reference; the path component is
never undefined, though it may be empty.  The algorithm assumes that
the base URI is well-formed and does not contain dot-segments in its path.
</p>
<div>
<a name="rfc.figure.u.27"></a>
</div>
<p>
For each URI reference (R), the following pseudocode describes an
algorithm for transforming R into its target URI (T):
</p>

<pre>   -- The URI reference is parsed into the five URI components
   --
   (R.scheme, R.authority, R.path, R.query, R.fragment) = parse(R);

   -- A non-strict parser may ignore a scheme in the reference
   -- if it is identical to the base URI's scheme.
   --
   if ((not strict) and (R.scheme == Base.scheme)) then
      undefine(R.scheme);
   endif;

   if defined(R.scheme) then
      T.scheme    = R.scheme;
      T.authority = R.authority;
      T.path      = remove_dot_segments(R.path);
      T.query     = R.query;
   else
      if defined(R.authority) then
         T.authority = R.authority;
         T.path      = remove_dot_segments(R.path);
         T.query     = R.query;
      else
         if (R.path == "") then
            T.path = Base.path;
            if defined(R.query) then
               T.query = R.query;
            else
               T.query = Base.query;
            endif;
         else
            if (R.path starts-with "/") then 
               T.path = remove_dot_segments(R.path);
            else
               T.path = merge(Base.path, R.path);
               T.path = remove_dot_segments(T.path);
            endif;
            T.query = R.query; 
         endif;
         T.authority = Base.authority;
      endif;
      T.scheme = Base.scheme;
   endif;

   T.fragment = R.fragment;
</pre>
<div>
<a name="rfc.section.5.2.p.4"></a>
</div>
<p>
The pseudocode above refers to a merge routine for merging a
relative-path reference with the path of the base URI.  This is
accomplished as follows:
</p>
<ul>

<li>
If the base URI's path is empty, then return a string consisting of "/"
concatenated with the reference's path component; otherwise,
</li>

<li>
If the base URI's path is non-hierarchical, as indicated by not beginning
with a slash, then return a string consisting of the reference's path
component; otherwise,
</li>

<li>
Return a string consisting of the reference's path component appended to
all but the last segment of the base URI's path (i.e., any characters
after the right-most "/" in the base URI path are excluded).
</li>

</ul>
<p>

</p>
<div>
<a name="rfc.section.5.2.p.5"></a>
</div>
<p>
The pseudocode also refers to a remove_dot_segments routine
for interpreting and removing the special "." and ".." complete
path segments from a referenced path.  This is done after the
path is extracted from a reference, whether or not the path
was relative, in order to remove any invalid or extraneous
dot-segments prior to forming the target URI.  Although there
are many ways to accomplish this removal process, we describe a
simple method using a separate string buffer:
</p>
<ol>

<li>
The buffer is initialized with the unprocessed path component.
</li>

<li>
If the buffer begins with "./" or "../", the "." or ".." segment is removed.
</li>

<li>
All occurrences of "/./" in the buffer are replaced with "/".
</li>

<li>
If the buffer ends with "/.", the "." is removed.
</li>

<li>
All occurrences of "/&lt;segment&gt;/../" in the buffer, where ".."
and &lt;segment&gt; are complete path segments, are iteratively replaced
with "/" in order from left to right until no matching pattern remains.
If the buffer ends with "/&lt;segment&gt;/..", that is also replaced with "/".
Note that &lt;segment&gt; may be empty.
</li>

<li>
All prefixes of "&lt;segment&gt;/../" in the buffer, where ".."
and &lt;segment&gt; are complete path segments, are iteratively replaced
with "/" in order from left to right until no matching pattern remains.
If the buffer ends with "&lt;segment&gt;/..", that is also replaced with "/".
Note that &lt;segment&gt; may be empty.
</li>

<li>
The remaining buffer is returned as the result of remove_dot_segments.
</li>

</ol>
<p>

</p>
<div>
<a name="rfc.section.5.2.p.6"></a>
</div>
<p>
Some systems may find it more efficient to implement the remove_dot_segments
algorithm as a stack of path segments being compressed, rather than as a
series of string pattern replacements.
</p>
<h2>
<a name="rfc.section.5.3">5.3</a>&nbsp;
    <a name="recomposition">Recomposition of a Parsed URI</a>
</h2>
<div>
<a name="rfc.figure.u.28"></a>
</div>
<p>
Parsed URI components can be recomposed to obtain the corresponding
URI reference string.  Using pseudocode, this would be:
</p>
<pre>   result = ""

   if defined(scheme) then
      append scheme to result;
      append ":" to result;
   endif;

   if defined(authority) then
      append "//" to result;
      append authority to result;
   endif;

   append path to result;

   if defined(query) then
      append "?" to result;
      append query to result;
   endif;

   if defined(fragment) then
      append "#" to result;
      append fragment to result;
   endif;

   return result;
</pre>
<p>
Note that we are careful to preserve the distinction between a
component that is undefined, meaning that its separator was not
present in the reference, and a component that is empty, meaning
that the separator was present and was immediately followed by the
next component separator or the end of the reference.
</p>
<h2>
<a name="rfc.section.5.4">5.4</a>&nbsp;
    <a name="reference-examples">Reference Resolution Examples</a>
</h2>
<div>
<a name="rfc.section.5.4.p.1"></a>
</div>
<p>
Within an object with a well-defined base URI of
</p>
<div>
<a name="rfc.figure.u.29"></a>
</div>
<pre>   http://a/b/c/d;p?q
</pre>
<div>
<a name="rfc.section.5.4.p.3"></a>
</div>
<p>
a relative URI reference would be resolved as follows:
</p>
<h3>
<a name="rfc.section.5.4.1">5.4.1</a>&nbsp;
    <a name="relative-normal">Normal Examples</a>
</h3>
<div>
<a name="rfc.figure.u.30"></a>
</div>
<pre>   "g:h"           =  "g:h"
   "g"             =  "http://a/b/c/g"
   "./g"           =  "http://a/b/c/g"
   "g/"            =  "http://a/b/c/g/"
   "/g"            =  "http://a/g"
   "//g"           =  "http://g"
   "?y"            =  "http://a/b/c/d;p?y"
   "g?y"           =  "http://a/b/c/g?y"
   "#s"            =  "http://a/b/c/d;p?q#s"
   "g#s"           =  "http://a/b/c/g#s"
   "g?y#s"         =  "http://a/b/c/g?y#s"
   ";x"            =  "http://a/b/c/;x"
   "g;x"           =  "http://a/b/c/g;x"
   "g;x?y#s"       =  "http://a/b/c/g;x?y#s"
   "."             =  "http://a/b/c/"
   "./"            =  "http://a/b/c/"
   ".."            =  "http://a/b/"
   "../"           =  "http://a/b/"
   "../g"          =  "http://a/b/g"
   "../.."         =  "http://a/"
   "../../"        =  "http://a/"
   "../../g"       =  "http://a/g"
</pre>
<h3>
<a name="rfc.section.5.4.2">5.4.2</a>&nbsp;
    <a name="relative-abnormal">Abnormal Examples</a>
</h3>
<div>
<a name="rfc.section.5.4.2.p.1"></a>
</div>
<p>
Although the following abnormal examples are unlikely to occur in
normal practice, all URI parsers should be capable of resolving them
consistently.  Each example uses the same base as above.
</p>
<div>
<a name="rfc.section.5.4.2.p.2"></a>
</div>
<p>
An empty reference refers to the current base URI.
</p>
<div>
<a name="rfc.figure.u.31"></a>
</div>
<pre>   ""              =  "http://a/b/c/d;p?q"
</pre>
<div>
<a name="rfc.section.5.4.2.p.4"></a>
</div>
<p>
Parsers must be careful in handling the case where there are more
relative path ".." segments than there are hierarchical levels in the
base URI's path.  Note that the ".." syntax cannot be used to change
the authority component of a URI.
</p>
<div>
<a name="rfc.figure.u.32"></a>
</div>
<pre>   "../../../g"    =  "http://a/g"
   "../../../../g" =  "http://a/g"
</pre>
<div>
<a name="rfc.section.5.4.2.p.6"></a>
</div>
<p>
Similarly, parsers must remove the dot-segments "." and ".." when
they are complete components of a path, but not when they are only
part of a segment.
</p>
<div>
<a name="rfc.figure.u.33"></a>
</div>
<pre>   "/./g"          =  "http://a/g"
   "/../g"         =  "http://a/g"
   "g."            =  "http://a/b/c/g."
   ".g"            =  "http://a/b/c/.g"
   "g.."           =  "http://a/b/c/g.."
   "..g"           =  "http://a/b/c/..g"
</pre>
<div>
<a name="rfc.section.5.4.2.p.8"></a>
</div>
<p>
Less likely are cases where the relative URI uses unnecessary or
nonsensical forms of the "." and ".." complete path segments.
</p>
<div>
<a name="rfc.figure.u.34"></a>
</div>
<pre>   "./../g"        =  "http://a/b/g"
   "./g/."         =  "http://a/b/c/g/"
   "g/./h"         =  "http://a/b/c/g/h"
   "g/../h"        =  "http://a/b/c/h"
   "g;x=1/./y"     =  "http://a/b/c/g;x=1/y"
   "g;x=1/../y"    =  "http://a/b/c/y"
</pre>
<div>
<a name="rfc.section.5.4.2.p.10"></a>
</div>
<p>
Some applications fail to separate the reference's query and/or
fragment components from a relative path before merging it with
the base path and removing dot-segments.  This error is rarely noticed,
since typical usage of a fragment never includes the hierarchy ("/")
character, and the query component is not normally used within
relative references.
</p>
<div>
<a name="rfc.figure.u.35"></a>
</div>
<pre>   "g?y/./x"       =  "http://a/b/c/g?y/./x"
   "g?y/../x"      =  "http://a/b/c/g?y/../x"
   "g#s/./x"       =  "http://a/b/c/g#s/./x"
   "g#s/../x"      =  "http://a/b/c/g#s/../x"
</pre>
<div>
<a name="rfc.section.5.4.2.p.12"></a>
</div>
<p>
Some parsers allow the scheme name to be present in a relative URI if
it is the same as the base URI scheme.  This is considered to be a
loophole in prior specifications of partial URI <a href="#RFC1630" title="Universal Resource Identifiers in WWW: A Unifying Syntax for the Expression of Names and Addresses of Objects on the Network as used in the World-Wide Web">[RFC1630]</a>.
Its use should be avoided, but is allowed for backward compatibility.
</p>
<div>
<a name="rfc.figure.u.36"></a>
</div>
<pre>   "http:g"        =  "http:g"         ; for strict parsers
                   /  "http://a/b/c/g" ; for backward compatibility
</pre>


<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.6">6</a>&nbsp;
    <a name="comparison">Normalization and Comparison</a>
</h1>
<div>
<a name="rfc.section.6.p.1"></a>
</div>
<p>
One of the most common operations on URIs is simple comparison:
determining if two URIs are equivalent without using the URIs to
access their respective resource(s).  A comparison is performed
every time a response cache is accessed, a browser checks its
history to color a link, or an XML parser processes tags within a namespace.
Extensive normalization prior to comparison of URIs is often used
by spiders and indexing engines to prune a search space or
reduce duplication of request actions and response storage.
</p>
<div>
<a name="rfc.section.6.p.2"></a>
</div>
<p>
URI comparison is performed in respect to some particular purpose,
and software with differing purposes will often be subject to differing
design trade-offs in regards to how much effort should be spent in
reducing duplicate identifiers.  This section describes a variety of
methods that may be used to compare URIs, the trade-offs between them,
and the types of applications that might use them.
</p>
<h2>
<a name="rfc.section.6.1">6.1</a>&nbsp;
    <a name="equivalence">Equivalence</a>
</h2>
<div>
<a name="rfc.section.6.1.p.1"></a>
</div>
<p>
Since URIs exist to identify resources, presumably they should be
considered equivalent when they identify the same resource.  However,
such a definition of equivalence is not of much practical use, since
there is no way for software to compare two resources without knowledge
of their origin.  For this reason, determination of equivalence or
difference of URIs is based on string comparison, perhaps augmented by
reference to additional rules provided by URI scheme definitions.
We use the terms "different" and "equivalent" to describe
the possible outcomes of such comparisons, but there
are many application-dependent versions of equivalence.
</p>
<div>
<a name="rfc.section.6.1.p.2"></a>
</div>
<p>
Even though it is possible to determine that two URIs are equivalent,
it is never possible to be sure that two URIs identify different
resources. Therefore, comparison methods are designed to minimize
false negatives while strictly avoiding false positives.
</p>
<div>
<a name="rfc.section.6.1.p.3"></a>
</div>
<p>
In testing for equivalence, it is generally unwise to directly compare
relative URI references; they should be converted to their absolute forms
before comparison.  Furthermore, when URI references are being compared
for the purpose of selecting (or avoiding) a network action, such as
retrieval of a representation, it is often necessary to remove fragment
identifiers from the URIs prior to comparison.
</p>
<h2>
<a name="rfc.section.6.2">6.2</a>&nbsp;
    <a name="comparison-ladder">Comparison Ladder</a>
</h2>
<div>
<a name="rfc.section.6.2.p.1"></a>
</div>
<p>
A variety of methods are used in practice to test URI equivalence.
These methods fall into a range, distinguished by the amount of
processing required and the degree to which the probability of false
negatives is reduced.  As noted above, false negatives cannot in
principle be eliminated.  In practice, their probability can be reduced,
but this reduction requires more processing and is not cost-effective
for all applications.
</p>
<div>
<a name="rfc.section.6.2.p.2"></a>
</div>
<p>
If this range of comparison practices is considered as a ladder, the
following discussion will climb the ladder, starting with those that
are cheap but have a relatively higher chance of producing false negatives,
and proceeding to those that have higher computational cost and lower risk
of false negatives.
</p>
<h3>
<a name="rfc.section.6.2.1">6.2.1</a>&nbsp;
    <a name="comparison-string">Simple String Comparison</a>
</h3>
<div>
<a name="rfc.section.6.2.1.p.1"></a>
</div>
<p>
If two URIs, considered as character strings, are identical, then it is
safe to conclude that they are equivalent.  This type of equivalence test
has very low computational cost and is in wide use in a variety of
applications, particularly in the domain of parsing.
</p>
<div>
<a name="rfc.section.6.2.1.p.2"></a>
</div>
<p>
Testing strings for equivalence requires some basic precautions.
This procedure is often referred to as "bit-for-bit" or "byte-for-byte"
comparison, which is potentially misleading.  Testing of strings for
equality is normally based on pairwise comparison of the characters
that make up the strings, starting from the first and proceeding until
both strings are exhausted and all characters found to be equal, a
pair of characters compares unequal, or one of the strings is exhausted
before the other.
</p>
<div>
<a name="rfc.section.6.2.1.p.3"></a>
</div>
<p>
Such character comparisons require that each pair of characters be put
in comparable form.  For example, should one URI be stored in a byte
array in EBCDIC encoding, and the second be in a Java String object,
bit-for-bit comparisons applied naively will produce both false-positive
and false-negative errors.  Thus, in principle, it is better to speak of
equality on a character-for-character rather than byte-for-byte or
bit-for-bit basis.
</p>
<div>
<a name="rfc.section.6.2.1.p.4"></a>
</div>
<p>
Unicode defines a character as being identified by number
("codepoint") with an associated bundle of visual and other semantics.
At the software level, it is not practical to compare semantic bundles,
so in practical terms, character-by-character comparisons are done
codepoint-by-codepoint.
</p>
<h3>
<a name="rfc.section.6.2.2">6.2.2</a>&nbsp;
    <a name="normalize-syntax">Syntax-based Normalization</a>
</h3>
<div>
<a name="rfc.figure.u.37"></a>
</div>
<p>
Software may use logic based on the definitions provided by this
specification to reduce the probability of false negatives.  Such
processing is moderately higher in cost than character-for-character
string comparison.  For example, an application using this approach
could reasonably consider the following two URIs equivalent:
</p>
<pre>   example://a/b/c/%7A
   eXAMPLE://a/./b/../b/c/%7a
</pre>
<p>
Web user agents, such as browsers, typically apply this type of URI
normalization when determining whether a cached response is available.
Syntax-based normalization includes such techniques as case normalization,
escape normalization, and removal of dot-segments.
</p>
<h3>
<a name="rfc.section.6.2.2.1">6.2.2.1</a>&nbsp;
    <a name="normalize-case">Case Normalization</a>
</h3>
<div>
<a name="rfc.section.6.2.2.1.p.1"></a>
</div>
<p>
When a URI scheme uses components of the generic syntax, it will
also use the common syntax equivalence rules, namely that the scheme
and hostname are case insensitive and therefore can be normalized
to lowercase.  For example, the URI &lt;HTTP://www.EXAMPLE.com/&gt; is
equivalent to &lt;http://www.example.com/&gt;.
</p>
<h3>
<a name="rfc.section.6.2.2.2">6.2.2.2</a>&nbsp;
    <a name="normalize-escape">Escape Normalization</a>
</h3>
<div>
<a name="rfc.section.6.2.2.2.p.1"></a>
</div>
<p>
The percent-escape mechanism described in <a href="#escaped">section&nbsp;2.4</a>
is a frequent source of variance among otherwise identical URIs.
One cause is the choice of uppercase or lowercase letters for the
hexadecimal digits within the escape sequence (e.g., "%3a" versus "%3A").
Such sequences are always equivalent; for the sake of uniformity, URI
generators and normalizers are strongly encouraged to use uppercase
letters for the hex digits A-F.
</p>
<div>
<a name="rfc.section.6.2.2.2.p.2"></a>
</div>
<p>
Only characters that are excluded from or reserved within the URI
syntax must be escaped when used as data.  However, some URI generators
go beyond that and escape characters that do not require escaping,
resulting in URIs that are equivalent to their unescaped counterparts.
Such URIs can be normalized by unescaping sequences that represent
the unreserved characters, as described in <a href="#unreserved">section&nbsp;2.3</a>.
</p>
<h3>
<a name="rfc.section.6.2.2.3">6.2.2.3</a>&nbsp;
    <a name="normalize-path">Path Segment Normalization</a>
</h3>
<div>
<a name="rfc.section.6.2.2.3.p.1"></a>
</div>
<p>
The complete path segments "." and ".." have a special meaning within
hierarchical URI schemes.  As such, they should not appear in absolute
paths; if they are found, they can be removed by applying the
remove_dot_segments algorithm to the path, as described in
<a href="#absolutize">section&nbsp;5.2</a>.
</p>
<h3>
<a name="rfc.section.6.2.3">6.2.3</a>&nbsp;
    <a name="normalize-scheme">Scheme-based Normalization</a>
</h3>
<div>
<a name="rfc.figure.u.38"></a>
</div>
<p>
The syntax and semantics of URIs vary from scheme to scheme, as described
by the defining specification for each scheme.  Software may use
scheme-specific rules, at further processing cost, to reduce the
probability of false negatives.  For example, Web spiders that populate
most large search engines would consider the following two URIs to be
equivalent:
</p>
<pre>   http://example.com/
   http://example.com:80/
</pre>
<p>
This behavior is based on the rules provided by the syntax and semantics
of the "http" URI scheme, which defines an empty port component as being
equivalent to the default TCP port for HTTP (port 80).  In general, a
URI scheme that uses the generic syntax for authority is defined such that
a URI with an explicit ":port", where the port is the default for the
scheme, is equivalent to one where the port is elided.
</p>
<h3>
<a name="rfc.section.6.2.4">6.2.4</a>&nbsp;
    <a name="normalize-protocol">Protocol-based Normalization</a>
</h3>
<div>
<a name="rfc.figure.u.39"></a>
</div>
<p>
Web spiders, for which substantial effort to reduce the incidence
of false negatives is often cost-effective, are observed to implement
even more aggressive techniques in URI comparison.  For example, if they
observe that a URI such as
</p>
<pre>   http://example.com/data
</pre>
<div>
<a name="rfc.figure.u.40"></a>
</div>
<p>
redirects to a URI differing only in the trailing slash
</p>
<pre>   http://example.com/data/
</pre>
<p>
they will likely regard the two as equivalent in the future.  Obviously,
this kind of technique is only appropriate in special situations.
</p>
<h2>
<a name="rfc.section.6.3">6.3</a>&nbsp;
    <a name="canonical-form">Canonical Form</a>
</h2>
<div>
<a name="rfc.section.6.3.p.1"></a>
</div>
<p>
It is in the best interests of everyone to avoid false-negatives in
comparing URIs and to minimize the amount of software processing for
such comparisons.  Those who generate and make reference to URIs can
reduce the cost of processing and the risk of false negatives by
consistently providing them in a form that is reasonably canonical
with respect to their scheme.  Specifically:
</p>
<ul>
  
<li>Always provide the URI scheme in lowercase characters.</li>
  
<li>Always provide the hostname, if any, in lowercase characters.</li>
  
<li>Only perform percent-escaping where it is essential.</li>
  
<li>Always use uppercase A-through-F characters when percent-escaping.</li>
  
<li>Prevent /./ and /../ from appearing in non-relative URI paths.</li>

</ul>
<p>

</p>
<div>
<a name="rfc.section.6.3.p.2"></a>
</div>
<p>
The good practices listed above are motivated by deployed software
that frequently use these techniques for the purposes of normalization.
</p>


<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.7">7</a>&nbsp;
    <a name="security">Security Considerations</a>
</h1>
<div>
<a name="rfc.section.7.p.1"></a>
</div>
<p>
A URI does not in itself pose a security threat.  However, since URIs
are often used to provide a compact set of instructions for access to
network resources, care must be taken to properly interpret the data
within a URI, to prevent that data from causing unintended access, and
to avoid including data that should not be revealed in plain text.
</p>
<h2>
<a name="rfc.section.7.1">7.1</a>&nbsp;
    <a name="security-reliability">Reliability and Consistency</a>
</h2>
<div>
<a name="rfc.section.7.1.p.1"></a>
</div>
<p>
There is no guarantee that, having once used a given URI to retrieve
some information, the same information will be retrievable by
that URI in the future. Nor is there any guarantee that the information
retrievable via that URI in the future will be observably similar to 
that retrieved in the past.  The URI syntax does not constrain how a
given scheme or authority apportions its name space or maintains it
over time.  Such a guarantee can only be obtained from the person(s)
controlling that name space and the resource in question.  A specific
URI scheme may define additional semantics, such as name persistence,
if those semantics are required of all naming authorities for that scheme.
</p>
<h2>
<a name="rfc.section.7.2">7.2</a>&nbsp;
    <a name="security-malicious">Malicious Construction</a>
</h2>
<div>
<a name="rfc.section.7.2.p.1"></a>
</div>
<p>
It is sometimes possible to construct a URI such that an attempt to
perform a seemingly harmless, idempotent operation, such as the
retrieval of a representation, will in fact cause a possibly damaging
remote operation to occur.  The unsafe URI is typically constructed by
specifying a port number other than that reserved for the network protocol
in question.  The client unwittingly contacts a site that is running a
different protocol service.  The content of the URI contains instructions
that, when interpreted according to this other protocol, cause an
unexpected operation.  An example has been the use of a gopher URI to
cause an unintended or impersonating message to be sent via a SMTP server.
</p>
<div>
<a name="rfc.section.7.2.p.2"></a>
</div>
<p>
Caution should be used when dereferencing a URI that specifies a TCP port
number other than the default for the scheme, especially when it is
a number within the reserved space.
</p>
<div>
<a name="rfc.section.7.2.p.3"></a>
</div>
<p>
Care should be taken when a URI contains escaped delimiters for a
given protocol (for example, CR and LF characters for telnet
protocols) that these octets are not unescaped before transmission.
This might violate the protocol, but avoids the potential for such
characters to be used to simulate an extra operation or parameter in
that protocol which might lead to an unexpected and possibly harmful
remote operation being performed.
</p>
<h2>
<a name="rfc.section.7.3">7.3</a>&nbsp;
    <a name="security-ipv4">Rare IP Address Formats</a>
</h2>
<div>
<a name="rfc.section.7.3.p.1"></a>
</div>
<p>
Although the URI syntax for IPv4address only allows the common,
dotted-decimal form of IPv4 address literal, many implementations that
process URIs make use of platform-dependent system routines, such as
gethostbyname() and inet_aton(), to translate the string literal to an
actual IP address.  Unfortunately, such system routines often allow and
process a much larger set of formats than those described in
<a href="#host">section&nbsp;3.2.2</a>.
</p>
<div>
<a name="rfc.section.7.3.p.2"></a>
</div>
<p>
For example, many implementations allow dotted forms of three numbers,
wherein the last part is interpreted as a 16-bit quantity and placed in
the right-most two bytes of the network address (e.g., a Class B network).
Likewise, a dotted form of two numbers means the last part is interpreted
as a 24-bit quantity and placed in the right most three bytes of the network
address (Class A), and a single number (without dots) is interpreted as
a 32-bit quantity and stored directly in the network address.  Adding
further to the confusion, some implementations allow each dotted part
to be interpreted as decimal, octal, or hexadecimal, as specified in
the C language (i.e., a leading 0x or 0X implies hexadecimal; otherwise,
a leading 0 implies octal; otherwise, the number is interpreted as decimal).
</p>
<div>
<a name="rfc.section.7.3.p.3"></a>
</div>
<p>
These additional IP address formats are not allowed in the URI syntax
due to differences between platform implementations.  However, they
can become a security concern if an application attempts to filter
access to resources based on the IP address in string literal format.
If such filtering is performed, it is recommended that literals
be converted to numeric form and filtered based on the numeric value,
rather than a prefix or suffix of the string form.
</p>
<h2>
<a name="rfc.section.7.4">7.4</a>&nbsp;
    <a name="security-sensitive">Sensitive Information</a>
</h2>
<div>
<a name="rfc.section.7.4.p.1"></a>
</div>
<p>
It is clearly unwise to use a URI that contains a password which is
intended to be secret. In particular, the use of a password within
the userinfo component of a URI is strongly discouraged except
in those rare cases where the 'password' parameter is intended to be
public.
</p>
<h2>
<a name="rfc.section.7.5">7.5</a>&nbsp;
    <a name="security-semantic">Semantic Attacks</a>
</h2>
<div>
<a name="rfc.figure.u.41"></a>
</div>
<p>
Because the userinfo component is rarely used and appears before the
hostname in the authority component, it can be used to construct a URI
that is intended to mislead a human user by appearing to identify one
(trusted) naming authority while actually identifying a different
authority hidden behind the noise.  For example
</p>
<pre>   http://www.example.com&amp;story=breaking_news@10.0.0.1/top_story.htm
</pre>
<p>
might lead a human user to assume that the host is 'www.example.com',
whereas it is actually '10.0.0.1'.  Note that the misleading userinfo
could be much longer than the example above.
</p>
<div>
<a name="rfc.section.7.5.p.2"></a>
</div>
<p>
A misleading URI, such as the one above, is an attack on the user's
preconceived notions about the meaning of a URI, rather than an attack
on the software itself.  User agents may be able to reduce the impact
of such attacks by visually distinguishing the various components of
the URI when rendered, such as by using a different color or tone to
render userinfo if any is present, though there is no general panacea.
More information on URI-based semantic attacks can be found in 
<a href="#Siedzik" title="Semantic Attacks: What's in a URL?">[Siedzik]</a>.
</p>


<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.8">8</a>&nbsp;
    <a name="ack">Acknowledgments</a>
</h1>
<div>
<a name="rfc.section.8.p.1"></a>
</div>
<p>
This specification is derived from RFC 2396 <a href="#RFC2396" title="Uniform Resource Identifiers (URI): Generic Syntax">[RFC2396]</a>,
RFC 1808 <a href="#RFC1808" title="Relative Uniform Resource Locators">[RFC1808]</a>, and RFC 1738 <a href="#RFC1738" title="Uniform Resource Locators (URL)">[RFC1738]</a>;
the acknowledgments in those documents still apply.
It also incorporates the update (with corrections) for IPv6 literals
in the host syntax, as defined by Robert M. Hinden, Brian E. Carpenter,
and Larry Masinter in <a href="#RFC2732" title="Format for Literal IPv6 Addresses in URL's">[RFC2732]</a>.
In addition, contributions by Reese Anschultz, Tim Bray, Rob Cameron,
Dan Connolly, Adam M. Costello, John Cowan, Jason Diamond, Martin Duerst,
Stefan Eissing,
Clive D.W. Feather, Pat Hayes, Henry Holtzman, Graham Klyne, Dan Kohn,
Bruce Lilly, Andrew Main, Michael Mealling, Julian Reschke, Tomas Rokicki,
Miles Sabin, Ronald Tschalaer, Marc Warne, Stuart Williams, and Henry Zongaro
are gratefully acknowledged.
</p>

<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.normative_references">Normative References</a>
</h1>
<table border="0" summary="Normative References">


<tr>
<td class="topnowrap"><b><a name="ASCII">[ASCII]</a></b></td><td class="top">American National Standards Institute,&nbsp;"Coded Character Set -- 7-bit American Standard Code for Information Interchange", ANSI&nbsp;X3.4, 1986.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC2234">[RFC2234]</a></b></td><td class="top"><a title="Internet Mail Consortium">Crocker, D.H.</a> and <a title="Demon Internet Ltd">Overell, P.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2234.txt">Augmented BNF for Syntax Specifications: ABNF</a>", RFC&nbsp;2234, November&nbsp;1997.</td>
</tr>

  
</table>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.informative_references">Informative References</a>
</h1>
<table border="0" summary="Informative References">
  

<tr>
<td class="topnowrap"><b><a name="RFC2277">[RFC2277]</a></b></td><td class="top"><a title="UNINETT">Alvestrand, H.T.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2277.txt">IETF Policy on Character Sets and Languages</a>", BCP&nbsp;18, RFC&nbsp;2277, January&nbsp;1998.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC1630">[RFC1630]</a></b></td><td class="top"><a title="CERN, World-Wide Web project">Berners-Lee, T.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc1630.txt">Universal Resource Identifiers in WWW: A Unifying Syntax for the Expression of Names and Addresses of Objects on the Network as used in the World-Wide Web</a>", RFC&nbsp;1630, June&nbsp;1994.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC1738">[RFC1738]</a></b></td><td class="top"><a title="CERN, World-Wide Web project">Berners-Lee, T.</a>,&nbsp;<a title="Xerox PARC">Masinter, L.</a> and <a title="University of Minnesota, Computer and Information Services">McCahill, M.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc1738.txt">Uniform Resource Locators (URL)</a>", RFC&nbsp;1738, December&nbsp;1994.</td>
</tr>
  

<tr>
<td class="topnowrap"><b><a name="RFC2396">[RFC2396]</a></b></td><td class="top"><a title="World Wide Web Consortium">Berners-Lee, T.</a>,&nbsp;<a title="University of California, Irvine">Fielding, R.T.</a> and <a title="Xerox PARC">Masinter, L.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2396.txt">Uniform Resource Identifiers (URI): Generic Syntax</a>", RFC&nbsp;2396, August&nbsp;1998.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC1123">[RFC1123]</a></b></td><td class="top"><a title="University of Southern California (USC), Information Sciences Institute">Braden, R.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc1123.txt">Requirements for Internet Hosts - Application and Support</a>", STD&nbsp;3, RFC&nbsp;1123, October&nbsp;1989.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC1808">[RFC1808]</a></b></td><td class="top"><a title="University of California Irvine, Department of Information and Computer Science">Fielding, R.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc1808.txt">Relative Uniform Resource Locators</a>", RFC&nbsp;1808, June&nbsp;1995.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC2046">[RFC2046]</a></b></td><td class="top"><a title="Innosoft International, Inc.">Freed, N.</a> and <a title="First Virtual Holdings">Borenstein, N.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2046.txt">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>", RFC&nbsp;2046, November&nbsp;1996.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC2518">[RFC2518]</a></b></td><td class="top"><a title="Microsoft Corporation">Goland, Y.</a>,&nbsp;<a title="Dept. Of Information and Computer
Science, University of California, Irvine">Whitehead, E.</a>,&nbsp;<a title="Netscape">Faizi, A.</a>,&nbsp;<a title="Novell">Carter, S.R.</a> and <a title="Novell">Jensen, D.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2518.txt">HTTP Extensions for Distributed Authoring -- WEBDAV</a>", RFC&nbsp;2518, February&nbsp;1999.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC0952">[RFC0952]</a></b></td><td class="top">Harrenstien, K.,&nbsp;Stahl, M. and Feinler, E.,&nbsp;"<a href="http://www.ietf.org/rfc/rfc952.txt">DoD Internet host table specification</a>", RFC&nbsp;952, October&nbsp;1985.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC3513">[RFC3513]</a></b></td><td class="top"><a title="Nokia">Hinden, R.</a> and <a title="Cisco Systems, Inc.">Deering, S.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc3513.txt">Internet Protocol Version 6 (IPv6) Addressing Architecture</a>", RFC&nbsp;3513, April&nbsp;2003.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC2732">[RFC2732]</a></b></td><td class="top"><a title="Nokia">Hinden, R.M.</a>,&nbsp;<a title="IBM, iCAIR">Carpenter, B.E.</a> and <a title="AT&amp;T Labs">Masinter, L.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2732.txt">Format for Literal IPv6 Addresses in URL's</a>", RFC&nbsp;2732, December&nbsp;1999.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC1736">[RFC1736]</a></b></td><td class="top"><a title="Information Systems and Technology">Kunze, J.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc1736.txt">Functional Recommendations for Internet Resource Locators</a>", RFC&nbsp;1736, February&nbsp;1995.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC1737">[RFC1737]</a></b></td><td class="top"><a title="Xerox Palo Alto Research Center">Masinter, L.</a> and <a title="MIT Laboratory for Computer Science">Sollins, K.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc1737.txt">Functional Requirements for Uniform Resource Names</a>", RFC&nbsp;1737, December&nbsp;1994.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC2141">[RFC2141]</a></b></td><td class="top"><a title="AT&amp;T">Moats, R.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2141.txt">URN Syntax</a>", RFC&nbsp;2141, May&nbsp;1997.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC1034">[RFC1034]</a></b></td><td class="top">Mockapetris, P.,&nbsp;"<a href="http://www.ietf.org/rfc/rfc1034.txt">Domain names - concepts and facilities</a>", STD&nbsp;13, RFC&nbsp;1034, November&nbsp;1987.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC2110">[RFC2110]</a></b></td><td class="top"><a title="Stockholm University and KTH">Palme, J.</a> and <a title="Microsoft Corporation">Hopmann, A.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2110.txt">MIME E-mail Encapsulation of Aggregate Documents, such as HTML (MHTML)</a>", RFC&nbsp;2110, March&nbsp;1997.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="RFC2717">[RFC2717]</a></b></td><td class="top"><a title="UUNET Technologies">Petke, R.</a> and <a title="Microsoft Corporation">King, I.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2717.txt">Registration Procedures for URL Scheme Names</a>", BCP&nbsp;35, RFC&nbsp;2717, November&nbsp;1999.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="Siedzik">[Siedzik]</a></b></td><td class="top">Siedzik, R.,&nbsp;"Semantic Attacks: What's in a URL?", April&nbsp;2001.</td>
</tr>


<tr>
<td class="topnowrap"><b><a name="UTF-8">[UTF-8]</a></b></td><td class="top"><a title="Alis Technologies">Yergeau, F.</a>,&nbsp;"<a href="http://www.ietf.org/rfc/rfc2279.txt">UTF-8, a transformation format of ISO 10646</a>", RFC&nbsp;2279, January&nbsp;1998.</td>
</tr>
  

</table>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.authors"></a>Author's Addresses</h1>
<table cellspacing="0" cellpadding="0" border="0" width="99%" summary="Authors">
<tr>
<td>&nbsp;</td><td>Tim Berners-Lee</td>
</tr>
<tr>
<td>&nbsp;</td><td>World Wide Web Consortium</td>
</tr>
<tr>
<td>&nbsp;</td><td>MIT/LCS, Room NE43-356<br>200 Technology Square<br>
</td>
</tr>
<tr>
<td>&nbsp;</td><td>Cambridge, MA&nbsp;02139</td>
</tr>
<tr>
<td>&nbsp;</td><td>USA</td>
</tr>
<tr>
<td class="right"><b>Phone:&nbsp;</b></td><td><a href="tel:+1-617-253-5702">+1-617-253-5702</a></td>
</tr>
<tr>
<td class="right"><b>Fax:&nbsp;</b></td><td><a href="fax:+1-617-258-5999">+1-617-258-5999</a></td>
</tr>
<tr>
<td class="right"><b>EMail:&nbsp;</b></td><td><a>timbl@w3.org</a></td>
</tr>
<tr>
<td class="right"><b>URI:&nbsp;</b></td><td><a href="http://www.w3.org/People/Berners-Lee/">http://www.w3.org/People/Berners-Lee/</a></td>
</tr>
<tr>
<td>&nbsp;</td><td></td>
</tr>
<tr>
<td>&nbsp;</td><td>Roy T. Fielding</td>
</tr>
<tr>
<td>&nbsp;</td><td>Day Software</td>
</tr>
<tr>
<td>&nbsp;</td><td>2 Corporate Plaza, Suite 150<br>
</td>
</tr>
<tr>
<td>&nbsp;</td><td>Newport Beach, CA&nbsp;92660</td>
</tr>
<tr>
<td>&nbsp;</td><td>USA</td>
</tr>
<tr>
<td class="right"><b>Phone:&nbsp;</b></td><td><a href="tel:+1-949-999-2523">+1-949-999-2523</a></td>
</tr>
<tr>
<td class="right"><b>Fax:&nbsp;</b></td><td><a href="fax:+1-949-644-5064">+1-949-644-5064</a></td>
</tr>
<tr>
<td class="right"><b>EMail:&nbsp;</b></td><td><a>roy.fielding@day.com</a></td>
</tr>
<tr>
<td class="right"><b>URI:&nbsp;</b></td><td><a href="http://www.apache.org/~fielding/">http://www.apache.org/~fielding/</a></td>
</tr>
<tr>
<td>&nbsp;</td><td></td>
</tr>
<tr>
<td>&nbsp;</td><td>Larry Masinter</td>
</tr>
<tr>
<td>&nbsp;</td><td>Adobe Systems Incorporated</td>
</tr>
<tr>
<td>&nbsp;</td><td>345 Park Ave<br>
</td>
</tr>
<tr>
<td>&nbsp;</td><td>San Jose, CA&nbsp;95110</td>
</tr>
<tr>
<td>&nbsp;</td><td>USA</td>
</tr>
<tr>
<td class="right"><b>Phone:&nbsp;</b></td><td><a href="tel:+1-408-536-3024">+1-408-536-3024</a></td>
</tr>
<tr>
<td class="right"><b>EMail:&nbsp;</b></td><td><a>LMM@acm.org</a></td>
</tr>
<tr>
<td class="right"><b>URI:&nbsp;</b></td><td><a href="http://larry.masinter.net/">http://larry.masinter.net/</a></td>
</tr>
<tr>
<td>&nbsp;</td><td></td>
</tr>
</table>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.A">A</a>&nbsp;
    <a name="collected-abnf">Collected ABNF for URI</a>
</h1>
<div>
<a name="rfc.figure.u.42"></a>
</div>
<pre>To be filled-in later.
</pre>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.B">B</a>&nbsp;
    <a name="regexp">Parsing a URI Reference with a Regular Expression</a>
</h1>
<div>
<a name="rfc.section.B.p.1"></a>
</div>
<p>
Since the "first-match-wins" algorithm is identical to the "greedy"
disambiguation method used by POSIX regular expressions, it is
natural and commonplace to use a regular expression for parsing the
potential five components of a URI reference.
</p>
<div>
<a name="rfc.section.B.p.2"></a>
</div>
<p>
The following line is the regular expression for breaking-down a
well-formed URI reference into its components.
</p>
<div>
<a name="rfc.figure.u.43"></a>
</div>
<pre>   ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?
    12            3  4          5       6  7        8 9
</pre>
<div>
<a name="rfc.section.B.p.4"></a>
</div>
<p>
The numbers in the second line above are only to assist readability;
they indicate the reference points for each subexpression (i.e., each
paired parenthesis).  We refer to the value matched for subexpression
&lt;n&gt; as $&lt;n&gt;.  For example, matching the above expression to
</p>
<div>
<a name="rfc.figure.u.44"></a>
</div>
<pre>   http://www.ics.uci.edu/pub/ietf/uri/#Related
</pre>
<div>
<a name="rfc.section.B.p.6"></a>
</div>
<p>
results in the following subexpression matches:
</p>
<div>
<a name="rfc.figure.u.45"></a>
</div>
<pre>   $1 = http:
   $2 = http
   $3 = //www.ics.uci.edu
   $4 = www.ics.uci.edu
   $5 = /pub/ietf/uri/
   $6 = &lt;undefined&gt;
   $7 = &lt;undefined&gt;
   $8 = #Related
   $9 = Related
</pre>
<div>
<a name="rfc.section.B.p.8"></a>
</div>
<p>
where &lt;undefined&gt; indicates that the component is not present, as is
the case for the query component in the above example.  Therefore, we
can determine the value of the four components and fragment as
</p>
<div>
<a name="rfc.figure.u.46"></a>
</div>
<pre>   scheme    = $2
   authority = $4
   path      = $5
   query     = $7
   fragment  = $9
</pre>
<div>
<a name="rfc.section.B.p.10"></a>
</div>
<p>
and, going in the opposite direction, we can recreate a URI reference
from its components using the algorithm of <a href="#recomposition">section&nbsp;5.3</a>.
</p>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.C">C</a>&nbsp;
    <a name="delimiting">Delimiting a URI in Context</a>
</h1>
<div>
<a name="rfc.section.C.p.1"></a>
</div>
<p>
URIs are often transmitted through formats that do not provide a clear
context for their interpretation.  For example, there are many
occasions when a URI is included in plain text; examples include text
sent in electronic mail, USENET news messages, and, most importantly,
printed on paper.  In such cases, it is important to be able to
delimit the URI from the rest of the text, and in particular from
punctuation marks that might be mistaken for part of the URI.
</p>
<div>
<a name="rfc.section.C.p.2"></a>
</div>
<p>
In practice, URI are delimited in a variety of ways, but usually
within double-quotes "http://example.com/", angle brackets
&lt;http://example.com/&gt;, or just using whitespace
</p>
<div>
<a name="rfc.figure.u.47"></a>
</div>
<pre>   http://example.com/
</pre>
<div>
<a name="rfc.section.C.p.4"></a>
</div>
<p>
These wrappers do not form part of the URI.
</p>
<div>
<a name="rfc.section.C.p.5"></a>
</div>
<p>
In the case where a fragment identifier is associated with a URI
reference, the fragment would be placed within the brackets as well
(separated from the URI with a "#" character).
</p>
<div>
<a name="rfc.section.C.p.6"></a>
</div>
<p>
In some cases, extra whitespace (spaces, line-breaks, tabs, etc.) may
need to be added to break a long URI across lines. The whitespace
should be ignored when extracting the URI.
</p>
<div>
<a name="rfc.section.C.p.7"></a>
</div>
<p>
No whitespace should be introduced after a hyphen ("-") character.
Because some typesetters and printers may (erroneously) introduce a
hyphen at the end of line when breaking a line, the interpreter of a
URI containing a line break immediately after a hyphen should ignore
all unescaped whitespace around the line break, and should be aware
that the hyphen may or may not actually be part of the URI.
</p>
<div>
<a name="rfc.section.C.p.8"></a>
</div>
<p>
Using &lt;&gt; angle brackets around each URI is especially recommended as
a delimiting style for a URI that contains whitespace.
</p>
<div>
<a name="rfc.section.C.p.9"></a>
</div>
<p>
The prefix "URL:" (with or without a trailing space) was formerly
recommended as a way to help distinguish a URI from other bracketed
designators, though it is not commonly used in practice and is
no longer recommended.
</p>
<div>
<a name="rfc.section.C.p.10"></a>
</div>
<p>
For robustness, software that accepts user-typed URI should attempt
to recognize and strip both delimiters and embedded whitespace.
</p>
<div>
<a name="rfc.figure.u.48"></a>
</div>
<p>
For example, the text:
</p>
<pre>   Yes, Jim, I found it under "http://www.w3.org/Addressing/",
   but you can probably pick it up from &lt;ftp://ds.internic.
   net/rfc/&gt;.  Note the warning in &lt;http://www.ics.uci.edu/pub/
   ietf/uri/historical.html#WARNING&gt;.
</pre>
<div>
<a name="rfc.section.C.p.12"></a>
</div>
<p>
contains the URI references
</p>
<div>
<a name="rfc.figure.u.49"></a>
</div>
<pre>   http://www.w3.org/Addressing/
   ftp://ds.internic.net/rfc/
   http://www.ics.uci.edu/pub/ietf/uri/historical.html#WARNING
</pre>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.section.D">D</a>&nbsp;
    <a name="changes">Summary of Non-editorial Changes</a>
</h1>
<h2>
<a name="rfc.section.D.1">D.1</a>&nbsp;
    <a name="additions">Additions</a>
</h2>
<div>
<a name="rfc.section.D.1.p.1"></a>
</div>
<p>
IPv6 literals have been added to the list of possible identifiers
for the host portion of a authority component, as described by
<a href="#RFC2732" title="Format for Literal IPv6 Addresses in URL's">[RFC2732]</a>, with the addition of "[" and "]" to
the reserved and uric sets.  Square brackets are now specified as
reserved within the authority component and not allowed outside
their use as delimiters for an IPv6reference within host.  In order
to make this change without changing the technical definition of the
path, query, and fragment components, those rules were redefined to
directly specify the characters allowed rather than be defined in
terms of uric.
</p>
<div>
<a name="rfc.section.D.1.p.2"></a>
</div>
<p>
Since <a href="#RFC2732" title="Format for Literal IPv6 Addresses in URL's">[RFC2732]</a> defers to <a href="#RFC3513" title="Internet Protocol Version 6 (IPv6) Addressing Architecture">[RFC3513]</a>
for definition of an IPv6 literal address, which unfortunately lacks
an ABNF description of IPv6address, we created a new ABNF rule
for IPv6address that matches the text representations defined by
Section 2.2 of <a href="#RFC3513" title="Internet Protocol Version 6 (IPv6) Addressing Architecture">[RFC3513]</a>.  Likewise, the definition
of IPv4address has been improved in order to limit each decimal
octet to the range 0-255, and the definition of hostname has been
improved to better specify length limitations and partially-qualified
domain names.
</p>
<div>
<a name="rfc.section.D.1.p.3"></a>
</div>
<p>

<a href="#comparison">Section 6</a> on URI normalization and comparison
has been completely rewritten and extended using input from Tim Bray
and discussion within the W3C Technical Architecture Group.  Likewise,
<a href="#encoding">section&nbsp;2.1</a> on the encoding of characters has been replaced.
</p>
<div>
<a name="rfc.section.D.1.p.4"></a>
</div>
<p>
An ABNF production for URI has been introduced to correspond to the
common usage of the term: an absolute URI with optional fragment.
</p>
<h2>
<a name="rfc.section.D.2">D.2</a>&nbsp;
    <a name="modifications">Modifications from RFC 2396</a>
</h2>
<div>
<a name="rfc.section.D.2.p.1"></a>
</div>
<p>
The ad-hoc BNF syntax has been replaced with the ABNF of
<a href="#RFC2234" title="Augmented BNF for Syntax Specifications: ABNF">[RFC2234]</a>.  This change required all rule names that
formerly included underscore characters to be renamed with a dash instead.
</p>
<div>
<a name="rfc.section.D.2.p.2"></a>
</div>
<p>
Section 2.2 on reserved characters has been rewritten to clearly explain
what characters are reserved, when they are reserved, and why they are
reserved even when not used as delimiters by the generic syntax.
Likewise, the section on escaped characters has been rewritten, and
URI normalizers are now given license to unescape any octets
corresponding to unreserved characters.  The number-sign ("#") character
has been moved back from the excluded delims to the reserved set.
</p>
<div>
<a name="rfc.section.D.2.p.3"></a>
</div>
<p>
The ABNF for URI and URI-reference has been redesigned to make them
more friendly to LALR parsers and significantly reduce complexity.
As a result, the layout form of syntax description has been removed,
along with the uric-no-slash, opaque-part, and rel-segment productions.
All references to "opaque" URIs have been replaced with a better
description of how the path component may be opaque to hierarchy.
The fragment identifier has been moved back into the section on
generic syntax components and within the URI and relative-URI
productions, though it remains excluded from absolute-URI.
The ambiguity regarding the parsing of URI-reference as a URI or a
relative-URI with a colon in the first segment is now explained
and disambiguated in the section defining relative-URI.
</p>
<div>
<a name="rfc.section.D.2.p.4"></a>
</div>
<p>
The ABNF of hier-part and relative-URI has been corrected
to allow a relative URI path to be empty.  This also allows an
absolute-URI to consist of nothing after the "scheme:", as is present
in practice with the "DAV:" namespace <a href="#RFC2518" title="HTTP Extensions for Distributed Authoring -- WEBDAV">[RFC2518]</a> and
the "about:" URI used by many browser implementations.
The ambiguity regarding the parsing of net-path, abs-path, and rel-path
is now explained and disambiguated in the same section.
</p>
<div>
<a name="rfc.section.D.2.p.5"></a>
</div>
<p>
Registry-based naming authorities that use the generic syntax
authority component are now limited to DNS hostnames, since those have
been the only such URIs in deployment.  This change was necessary to
enable internationalized domain names to be processed in their native
character encodings at the application layers above URI processing.
The reg_name, server, and hostport productions have been removed
to simplify parsing of the URI syntax.
</p>
<div>
<a name="rfc.section.D.2.p.6"></a>
</div>
<p>
The ABNF of qualified has been simplified to remove a parsing ambiguity
without changing the allowed syntax.  The toplabel production has been
removed because it served no useful purpose.
The ambiguity regarding the parsing of host as IPv4address or hostname
is now explained and disambiguated in the same section.
</p>
<div>
<a name="rfc.section.D.2.p.7"></a>
</div>
<p>
The resolving relative references algorithm of <a href="#RFC2396" title="Uniform Resource Identifiers (URI): Generic Syntax">[RFC2396]</a>
has been rewritten using pseudocode for this revision to improve clarity
and fix the following issues:
</p>
<ul>

<li>

<a href="#RFC2396" title="Uniform Resource Identifiers (URI): Generic Syntax">[RFC2396]</a> section 5.2, step 6a, failed to account for
a base URI with no path.
</li>

<li>
Restored the behavior of <a href="#RFC1808" title="Relative Uniform Resource Locators">[RFC1808]</a> where, if the
reference contains an empty path and a defined query component,
then the target URI inherits the base URI's path component.
</li>

<li>
Removed the special-case treatment of same-document references
in favor of a section that explains that a new retrieval action
should not be made if the target URI and base URI, excluding
fragments, match.  This change has no impact on user agent behavior
aside from how the resolved reference might be described to the user.
</li>

<li>
Separated the path merge routine into two routines: merge, for
describing combination of the base URI path with a relative-path
reference, and remove_dot_segments, for describing how to remove
the special "." and ".." segments from a composed path.  The
remove_dot_segments algorithm is now applied to all URI reference
paths in order to match common implementations and improve the
normalization of URIs in practice.  This change only impacts the
parsing of abnormal references and same-scheme references wherein
the base URI has a non-hierarchical path.
</li>

</ul>
<p>

</p>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.ipr">Intellectual Property Statement</a>
</h1>
<p>
    The IETF takes no position regarding the validity or scope of
    any intellectual property or other rights that might be claimed
    to  pertain to the implementation or use of the technology
    described in this document or the extent to which any license
    under such rights might or might not be available; neither does
    it represent that it has made any effort to identify any such
    rights. Information on the IETF's procedures with respect to
    rights in standards-track and standards-related documentation
    can be found in BCP-11. Copies of claims of rights made
    available for publication and any assurances of licenses to
    be made available, or the result of an attempt made
    to obtain a general license or permission for the use of such
    proprietary rights by implementors or users of this
    specification can be obtained from the IETF Secretariat.
  </p>
<p>
    The IETF invites any interested party to bring to its
    attention any copyrights, patents or patent applications, or
    other proprietary rights which may cover technology that may be
    required to practice this standard. Please address the
    information to the IETF Executive Director.
  </p>
<h1>
<a name="rfc.copyright">Full Copyright Statement</a>
</h1>
<p>    
    Copyright (C) The Internet Society (2003). All Rights Reserved.
  </p>
<p>
    This document and translations of it may be copied and furnished to
    others, and derivative works that comment on or otherwise explain it
    or assist in its implementation may be prepared, copied, published and
    distributed, in whole or in part, without restriction of any kind,
    provided that the above copyright notice and this paragraph are
    included on all such copies and derivative works. However, this
    document itself may not be modified in any way, such as by removing
    the copyright notice or references to the Internet Society or other
    Internet organizations, except as needed for the purpose of
    developing Internet standards in which case the procedures for
    copyrights defined in the Internet Standards process must be
    followed, or as required to translate it into languages other than
    English.
  </p>
<p>
    The limited permissions granted above are perpetual and will not be
    revoked by the Internet Society or its successors or assignees.
  </p>
<p>
    This document and the information contained herein is provided on an
    "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
    TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
    BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
    HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
    MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
  </p>
<h1>Acknowledgement</h1>
<p>
      Funding for the RFC editor function is currently provided by the
      Internet Society.
  </p>
<hr class="noprint">
<table style="margin-left: auto; margin-right: 0; float: right; width: 2.5em;" class="noprint" summary="link to TOC">
<tr>
<td style="background-color: #990000; text-align: center; height: 1.5em;"><a href="#rfc.toc"><b class="link2">&nbsp;TOC&nbsp;</b></a></td>
</tr>
</table>
<h1>
<a name="rfc.index"></a>Index</h1>
<table summary="Index">
<tr>
<td><b>A</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;ABNF&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.18"><b>1.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;absolute&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.120"><b>4.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;absolute-path&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.114"><b>4.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;absolute-URI&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.121"><b>4.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;abs-path&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.45"><b>3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;access&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.10"><b>1.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;alphanum&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.73"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;authority&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.47">3</a>, 
  &nbsp;<a href="#rfc.iref.61"><b>3.2</b></a></td>
</tr>
<tr>
<td><b>B</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;base URI&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.130"><b>5.1</b></a></td>
</tr>
<tr>
<td><b>D</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;dec-octet&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.80"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;delims&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.40"><b>2.5</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;dereference&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.12"><b>1.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;domainlabel&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.72"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;dot-segments&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.101"><b>3.3</b></a></td>
</tr>
<tr>
<td><b>E</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;escaped&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.36"><b>2.4.1</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;excluded&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.38"><b>2.5</b></a></td>
</tr>
<tr>
<td><b>F</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;fragment&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.105"><b>3.5</b></a></td>
</tr>
<tr>
<td><b>G</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;generic syntax&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.4"><b>1.1.1</b></a></td>
</tr>
<tr>
<td><b>H</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;h4&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.87"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;hierarchical&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.16"><b>1.2.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;hier-part&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.43"><b>3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;host&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.68"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;hostname&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.70"><b>3.2.2</b></a></td>
</tr>
<tr>
<td><b>I</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;identifier&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.3"><b>1.1</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;invisible&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.39"><b>2.5</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;IPv4&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.78"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;IPv4address&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.79"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;IPv6&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.83"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;IPv6address&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.85"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;IPv6reference&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.84"><b>3.2.2</b></a></td>
</tr>
<tr>
<td><b>L</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;locator&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.7"><b>1.1.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;ls32&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.86"><b>3.2.2</b></a></td>
</tr>
<tr>
<td><b>M</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;mark&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.33"><b>2.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;merge&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.131"><b>5.2</b></a></td>
</tr>
<tr>
<td><b>N</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;name&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.8"><b>1.1.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;net-path&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.44"><b>3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;network-path&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.113"><b>4.2</b></a></td>
</tr>
<tr>
<td><b>P</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;path&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.48">3</a>, 
  &nbsp;<a href="#rfc.iref.94"><b>3.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;path-segments&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.95"><b>3.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;pchar&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.97"><b>3.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;port&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.92"><b>3.2.3</b></a></td>
</tr>
<tr>
<td><b>Q</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;qualified&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.71"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;query&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.102"><b>3.4</b></a></td>
</tr>
<tr>
<td><b>R</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;relative&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.17"><b>1.2.3</b></a>, 
  &nbsp;<a href="#rfc.iref.128">5</a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;relative-path&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.115"><b>4.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;relative-URI&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.112"><b>4.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;rel-path&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.46"><b>3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;remove_dot_segments&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.132"><b>5.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;representation&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.14"><b>1.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;reserved&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.30"><b>2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;resolution&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.11"><b>1.2.2</b></a>, 
  &nbsp;<a href="#rfc.iref.129">5</a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;resource&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.2"><b>1.1</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;retrieval&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.13"><b>1.2.2</b></a></td>
</tr>
<tr>
<td><b>S</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;same-document&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.126"><b>4.4</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;sameness&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.15"><b>1.2.2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;scheme&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.59"><b>3.1</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;segment&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.96"><b>3.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;suffix&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.127"><b>4.5</b></a></td>
</tr>
<tr>
<td><b>T</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;transcription&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.9"><b>1.2.1</b></a></td>
</tr>
<tr>
<td><b>U</b></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;uniform&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.1"><b>1.1</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;unreserved&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.32"><b>2.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;unwise&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.41"><b>2.5</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;URI&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.42"><b>3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;uric&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.28"><b>2</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;URI grammar&nbsp;
                
              </td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;absolute-URI&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.122"><b>4.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;abs-path&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.52"><b>3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;ALPHA&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.19"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;alphanum&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.77"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;authority&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.58">3</a>, 
  &nbsp;<a href="#rfc.iref.62"><b>3.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;CR&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.20"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;CTL&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.21"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;dec-octet&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.82"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;DIGIT&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.22"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;domainlabel&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.76"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;DQUOTE&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.23"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;escaped&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.37"><b>2.4.1</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;fragment&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.57">3</a>, 
  &nbsp;<a href="#rfc.iref.106"><b>3.5</b></a>, 
  &nbsp;<a href="#rfc.iref.119">4.2</a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;h4&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.91"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;HEXDIG&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.24"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;hier-part&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.50"><b>3</b></a>, 
  &nbsp;<a href="#rfc.iref.117">4.2</a>, 
  &nbsp;<a href="#rfc.iref.124">4.3</a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;host&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.64">3.2</a>, 
  &nbsp;<a href="#rfc.iref.69"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;hostname&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.74"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;IPv4address&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.81"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;IPv6address&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.89"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;IPv6reference&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.88"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;LF&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.25"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;ls32&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.90"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;mark&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.35"><b>2.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;net-path&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.51"><b>3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;OCTET&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.26"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;path-segments&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.54">3</a>, 
  &nbsp;<a href="#rfc.iref.98"><b>3.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;pchar&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.100"><b>3.3</b></a>, 
  &nbsp;<a href="#rfc.iref.104">3.4</a>, 
  &nbsp;<a href="#rfc.iref.107">3.5</a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;port&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.65">3.2</a>, 
  &nbsp;<a href="#rfc.iref.93"><b>3.2.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;qualified&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.75"><b>3.2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;query&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.56">3</a>, 
  &nbsp;<a href="#rfc.iref.103"><b>3.4</b></a>, 
  &nbsp;<a href="#rfc.iref.118">4.2</a>, 
  &nbsp;<a href="#rfc.iref.125">4.3</a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;relative-URI&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.111">4.1</a>, 
  &nbsp;<a href="#rfc.iref.116"><b>4.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;rel-path&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.53"><b>3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;reserved&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.31"><b>2.2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;scheme&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.55">3</a>, 
  &nbsp;<a href="#rfc.iref.60"><b>3.1</b></a>, 
  &nbsp;<a href="#rfc.iref.123">4.3</a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;segment&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.99"><b>3.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;SP&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.27"><b>1.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;unreserved&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.34"><b>2.3</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;URI&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.49"><b>3</b></a>, 
  &nbsp;<a href="#rfc.iref.110">4.1</a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;uric&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.29"><b>2</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;URI-reference&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.109"><b>4.1</b></a></td>
</tr>
<tr>
<td>
                &nbsp;&nbsp;&nbsp;&nbsp;userinfo&nbsp;
                  
                
  &nbsp;<a href="#rfc.iref.63">3.2</a>, 
  &nbsp;<a href="#rfc.iref.67"><b>3.2.1</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;URI-reference&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.108"><b>4.1</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;URL&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.5"><b>1.1.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;URN&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.6"><b>1.1.3</b></a></td>
</tr>
<tr>
<td>
              &nbsp;&nbsp;userinfo&nbsp;
                
              
  &nbsp;<a href="#rfc.iref.66"><b>3.2.1</b></a></td>
</tr>
</table>
</body>
</html>
